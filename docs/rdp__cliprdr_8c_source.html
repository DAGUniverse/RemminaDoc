<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Remmina - The GTK+ Remote Desktop Client: rdp_cliprdr.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="remmina.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Remmina - The GTK+ Remote Desktop Client
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">Remmina is a remote desktop client written in GTK+, aiming to be useful for system administrators and travellers, who need to work with lots of remote computers in front of either large monitors or tiny netbooks. Remmina supports multiple network protocols in an integrated and consistent user interface. Currently RDP, VNC, NX, XDMCP and SSH are supported.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rdp__cliprdr_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">rdp_cliprdr.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="rdp__cliprdr_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Remmina - The GTK+ Remote Desktop Client</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) 2012-2012 Jean-Louis Dupond</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2014-2015 Antenore Gatta, Fabio Castelli, Giovanni Panozzo</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (C) 2016-2017 Antenore Gatta, Giovanni Panozzo</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * (at your option) any later version.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * GNU General Public License for more details.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Boston, MA  02110-1301, USA.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *  In addition, as a special exception, the copyright holders give</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *  permission to link the code of portions of this program with the</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *  OpenSSL library under certain conditions as described in each</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *  individual source file, and distribute linked combinations</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *  including the two.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *  You must obey the GNU General Public License in all respects</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *  for all of the code used other than OpenSSL. *  If you modify</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *  file(s) with this exception, you may extend this exception to your</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *  version of the file(s), but you are not obligated to do so. *  If you</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *  do not wish to do so, delete this exception statement from your</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> *  version. *  If you delete this exception statement from all source</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> *  files in the program, then also delete it here.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rdp__plugin_8h.html">rdp_plugin.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rdp__cliprdr_8h.html">rdp_cliprdr.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rdp__event_8h.html">rdp_event.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;freerdp/freerdp.h&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;freerdp/channels/channels.h&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;freerdp/client/cliprdr.h&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define CLIPBOARD_TRANSFER_WAIT_TIME 2</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a7eb7cd7eeab0e52c33721cc0564964ea">   48</a></span>&#160;UINT32 <a class="code" href="rdp__cliprdr_8c.html#a7eb7cd7eeab0e52c33721cc0564964ea">remmina_rdp_cliprdr_get_format_from_gdkatom</a>(GdkAtom atom)</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    UINT32 rc;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    gchar* name = gdk_atom_name(atom);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    rc = 0;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(<span class="stringliteral">&quot;UTF8_STRING&quot;</span>, name) == 0 || g_strcmp0(<span class="stringliteral">&quot;text/plain;charset=utf-8&quot;</span>, name) == 0) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        rc = CF_UNICODETEXT;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(<span class="stringliteral">&quot;TEXT&quot;</span>, name) == 0 || g_strcmp0(<span class="stringliteral">&quot;text/plain&quot;</span>, name) == 0) {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        rc =  CF_TEXT;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(<span class="stringliteral">&quot;text/html&quot;</span>, name) == 0) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        rc =  CB_FORMAT_HTML;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(<span class="stringliteral">&quot;image/png&quot;</span>, name) == 0) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        rc =  CB_FORMAT_PNG;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(<span class="stringliteral">&quot;image/jpeg&quot;</span>, name) == 0) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        rc =  CB_FORMAT_JPEG;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(<span class="stringliteral">&quot;image/bmp&quot;</span>, name) == 0) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        rc =  CF_DIB;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    g_free(name);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a5378f6a230a35d2a84e94ee029a10af4">   76</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a5378f6a230a35d2a84e94ee029a10af4">remmina_rdp_cliprdr_get_target_types</a>(UINT32** formats, UINT16* size, GdkAtom* types, <span class="keywordtype">int</span> count)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    *size = 1;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    *formats = (UINT32*)malloc(<span class="keyword">sizeof</span>(UINT32) * (count + 1));</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    *formats[0] = 0;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        UINT32 format = <a class="code" href="rdp__cliprdr_8c.html#a7eb7cd7eeab0e52c33721cc0564964ea">remmina_rdp_cliprdr_get_format_from_gdkatom</a>(types[i]);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span> (format != 0) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            (*formats)[*size] = format;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            (*size)++;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    *formats = realloc(*formats, <span class="keyword">sizeof</span>(UINT32) * (*size));</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a4f9d059736e69df00273ec853d15c772">   95</a></span>&#160;<span class="keyword">static</span> UINT8* <a class="code" href="rdp__cliprdr_8c.html#a4f9d059736e69df00273ec853d15c772">lf2crlf</a>(UINT8* data, <span class="keywordtype">int</span>* size)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    UINT8 c;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    UINT8* outbuf;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    UINT8* out;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    UINT8* in_end;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    UINT8* in;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">int</span> out_size;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    out_size = (*size) * 2 + 1;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    outbuf = (UINT8*)malloc(out_size);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    out = outbuf;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    in = data;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    in_end = data + (*size);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">while</span> (in &lt; in_end) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        c = *in++;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            *out++ = <span class="charliteral">&#39;\r&#39;</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            *out++ = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }<span class="keywordflow">else</span>  {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            *out++ = c;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    *out++ = 0;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    *size = out - outbuf;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> outbuf;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a55dec77cdcdc16a6d85680943eb2a859">  127</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a55dec77cdcdc16a6d85680943eb2a859">crlf2lf</a>(UINT8* data, <span class="keywordtype">size_t</span>* size)</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    UINT8 c;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    UINT8* out;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    UINT8* in;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    UINT8* in_end;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    out = data;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    in = data;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    in_end = data + (*size);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">while</span> (in &lt; in_end) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        c = *in++;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">if</span> (c != <span class="charliteral">&#39;\r&#39;</span>)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            *out++ = c;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    *size = out - data;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#aca54116b93ed1fb466951e51a32f6934">  148</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="rdp__cliprdr_8c.html#aca54116b93ed1fb466951e51a32f6934">remmina_rdp_cliprdr_server_file_contents_request</a>(CliprdrClientContext* context, CLIPRDR_FILE_CONTENTS_REQUEST* fileContentsRequest)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a660e39f442c17f4668addc15ea5f6b9b">  153</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="rdp__cliprdr_8c.html#a660e39f442c17f4668addc15ea5f6b9b">remmina_rdp_cliprdr_server_file_contents_response</a>(CliprdrClientContext* context, CLIPRDR_FILE_CONTENTS_RESPONSE* fileContentsResponse)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a8afec91e9f54fc3a0ea8f25d8349bd8b">  159</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a8afec91e9f54fc3a0ea8f25d8349bd8b">remmina_rdp_cliprdr_send_client_format_list</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a> *gp)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    CLIPRDR_FORMAT_LIST *pFormatList;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="structremmina__plugin__rdp__event.html">RemminaPluginRdpEvent</a> rdp_event = { 0 };</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (!rfi || !rfi-&gt;<a class="code" href="structrf__context.html#a3c2ffa55ba97bc70324d61b8cc838e73">connected</a> || rfi-&gt;<a class="code" href="structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a>)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    clipboard = &amp;(rfi-&gt;<a class="code" href="structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    ui = g_new0(<a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f">REMMINA_RDP_UI_CLIPBOARD</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.clipboard = clipboard;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.type = <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a6ed2696cd28620a9d41f501fe22162bc">REMMINA_RDP_UI_CLIPBOARD_FORMATLIST</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    pFormatList = <a class="code" href="rdp__event_8c.html#adaaf3de8342309cc52668f318a473350">remmina_rdp_event_queue_ui_sync_retptr</a>(gp, ui);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    rdp_event.<a class="code" href="structremmina__plugin__rdp__event.html#a84797e0cdf4484432740a8946325f126">type</a> = <a class="code" href="rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7aebb0df0651989a89f3f05e3c4894dd50">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_LIST</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    rdp_event.<a class="code" href="structremmina__plugin__rdp__event.html#a72cd3fa2cc46eb03de7f68d63b2646b2">clipboard_formatlist</a>.pFormatList = pFormatList;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="rdp__event_8c.html#ad446d6471bddba97f8bfcee8c51e4580">remmina_rdp_event_event_push</a>(gp, &amp;rdp_event);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a1c95eb50a82dbeac3c43374eaad8e489">  185</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a1c95eb50a82dbeac3c43374eaad8e489">remmina_rdp_cliprdr_send_client_capabilities</a>(<a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    CLIPRDR_CAPABILITIES capabilities;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    CLIPRDR_GENERAL_CAPABILITY_SET generalCapabilitySet;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    capabilities.cCapabilitiesSets = 1;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    capabilities.capabilitySets = (CLIPRDR_CAPABILITY_SET*)&amp;(generalCapabilitySet);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    generalCapabilitySet.capabilitySetType = CB_CAPSTYPE_GENERAL;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    generalCapabilitySet.capabilitySetLength = 12;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    generalCapabilitySet.version = CB_CAPS_VERSION_2;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    generalCapabilitySet.generalFlags = CB_USE_LONG_FORMAT_NAMES;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    clipboard-&gt;<a class="code" href="structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>-&gt;ClientCapabilities(clipboard-&gt;<a class="code" href="structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>, &amp;capabilities);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a5c9890f4354ef9a8dedcf3a371a2a16f">  204</a></span>&#160;<span class="keyword">static</span> UINT <a class="code" href="rdp__cliprdr_8c.html#a5c9890f4354ef9a8dedcf3a371a2a16f">remmina_rdp_cliprdr_monitor_ready</a>(CliprdrClientContext* context, CLIPRDR_MONITOR_READY* monitorReady)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard = (<a class="code" href="structrf__clipboard.html">rfClipboard</a>*)context-&gt;custom;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="rdp__cliprdr_8c.html#a1c95eb50a82dbeac3c43374eaad8e489">remmina_rdp_cliprdr_send_client_capabilities</a>(clipboard);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    gp = clipboard-&gt;<a class="code" href="structrf__clipboard.html#a268b5336ae92d8d2f54c5ee441325d68">rfi</a>-&gt;<a class="code" href="structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="rdp__cliprdr_8c.html#a8afec91e9f54fc3a0ea8f25d8349bd8b">remmina_rdp_cliprdr_send_client_format_list</a>(gp);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> CHANNEL_RC_OK;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#ab8dbdd80d3da147e6a65dd9f943f5e42">  217</a></span>&#160;<span class="keyword">static</span> UINT <a class="code" href="rdp__cliprdr_8c.html#ab8dbdd80d3da147e6a65dd9f943f5e42">remmina_rdp_cliprdr_server_capabilities</a>(CliprdrClientContext* context, CLIPRDR_CAPABILITIES* capabilities)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> CHANNEL_RC_OK;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#aad8017b7ae0935c5266e7777dae3c3d4">  224</a></span>&#160;<span class="keyword">static</span> UINT <a class="code" href="rdp__cliprdr_8c.html#aad8017b7ae0935c5266e7777dae3c3d4">remmina_rdp_cliprdr_server_format_list</a>(CliprdrClientContext* context, CLIPRDR_FORMAT_LIST* formatList)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">/* Called when a user do a &quot;Copy&quot; on the server: we collect all formats</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">     * the server send us and then setup the local clipboard with the appropiate</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">     * functions to request server data */</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    CLIPRDR_FORMAT* format;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    CLIPRDR_FORMAT_LIST_RESPONSE formatListResponse;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    clipboard = (<a class="code" href="structrf__clipboard.html">rfClipboard</a>*)context-&gt;custom;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    gp = clipboard-&gt;<a class="code" href="structrf__clipboard.html#a268b5336ae92d8d2f54c5ee441325d68">rfi</a>-&gt;<a class="code" href="structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    GtkTargetList* list = gtk_target_list_new(NULL, 0);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; formatList-&gt;numFormats; i++) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        format = &amp;formatList-&gt;formats[i];</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (format-&gt;formatId == CF_UNICODETEXT) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            GdkAtom atom = gdk_atom_intern(<span class="stringliteral">&quot;UTF8_STRING&quot;</span>, TRUE);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            gtk_target_list_add(list, atom, 0, CF_UNICODETEXT);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (format-&gt;formatId == CF_TEXT) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            GdkAtom atom = gdk_atom_intern(<span class="stringliteral">&quot;TEXT&quot;</span>, TRUE);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            gtk_target_list_add(list, atom, 0, CF_TEXT);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (format-&gt;formatId == CF_DIB) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            GdkAtom atom = gdk_atom_intern(<span class="stringliteral">&quot;image/bmp&quot;</span>, TRUE);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            gtk_target_list_add(list, atom, 0, CF_DIB);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (format-&gt;formatId == CF_DIBV5) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            GdkAtom atom = gdk_atom_intern(<span class="stringliteral">&quot;image/bmp&quot;</span>, TRUE);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            gtk_target_list_add(list, atom, 0, CF_DIBV5);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (format-&gt;formatId == CB_FORMAT_JPEG) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            GdkAtom atom = gdk_atom_intern(<span class="stringliteral">&quot;image/jpeg&quot;</span>, TRUE);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            gtk_target_list_add(list, atom, 0, CB_FORMAT_JPEG);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (format-&gt;formatId == CB_FORMAT_PNG) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            GdkAtom atom = gdk_atom_intern(<span class="stringliteral">&quot;image/png&quot;</span>, TRUE);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            gtk_target_list_add(list, atom, 0, CB_FORMAT_PNG);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (format-&gt;formatId == CB_FORMAT_HTML) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            GdkAtom atom = gdk_atom_intern(<span class="stringliteral">&quot;text/html&quot;</span>, TRUE);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            gtk_target_list_add(list, atom, 0, CB_FORMAT_HTML);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">/* Now we tell GTK to change the local keyboard calling gtk_clipboard_set_with_owner</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">     * via REMMINA_RDP_UI_CLIPBOARD_SET_DATA</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">     * GTK will immediately fire an &quot;owner-change&quot; event, that we should ignore */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    ui = g_new0(<a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f">REMMINA_RDP_UI_CLIPBOARD</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.clipboard = clipboard;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.type = <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a8d1ee3147da1c703472c152799330dad">REMMINA_RDP_UI_CLIPBOARD_SET_DATA</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.targetlist = list;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="rdp__event_8c.html#ab5fe43c1b1b77c39f118d2581942eb81">remmina_rdp_event_queue_ui_sync_retint</a>(gp, ui);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">/* Send FormatListResponse to server */</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    formatListResponse.msgType = CB_FORMAT_LIST_RESPONSE;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    formatListResponse.msgFlags = CB_RESPONSE_OK; <span class="comment">// Can be CB_RESPONSE_FAIL in case of error</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    formatListResponse.dataLen = 0;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> clipboard-&gt;<a class="code" href="structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>-&gt;ClientFormatListResponse(clipboard-&gt;<a class="code" href="structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>, &amp;formatListResponse);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a989aa6f897e6bade4870d577eee5bec9">  291</a></span>&#160;<span class="keyword">static</span> UINT <a class="code" href="rdp__cliprdr_8c.html#a989aa6f897e6bade4870d577eee5bec9">remmina_rdp_cliprdr_server_format_list_response</a>(CliprdrClientContext* context, CLIPRDR_FORMAT_LIST_RESPONSE* formatListResponse)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">return</span> CHANNEL_RC_OK;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a3a346af4c3c92ec71797838ecc69bdae">  298</a></span>&#160;<span class="keyword">static</span> UINT <a class="code" href="rdp__cliprdr_8c.html#a3a346af4c3c92ec71797838ecc69bdae">remmina_rdp_cliprdr_server_format_data_request</a>(CliprdrClientContext* context, CLIPRDR_FORMAT_DATA_REQUEST* formatDataRequest)</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    clipboard = (<a class="code" href="structrf__clipboard.html">rfClipboard</a>*)context-&gt;custom;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    gp = clipboard-&gt;<a class="code" href="structrf__clipboard.html#a268b5336ae92d8d2f54c5ee441325d68">rfi</a>-&gt;<a class="code" href="structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    ui = g_new0(<a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f">REMMINA_RDP_UI_CLIPBOARD</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.clipboard = clipboard;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.type = <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a8d48530ae1a868c40e3804aa2df205c7">REMMINA_RDP_UI_CLIPBOARD_GET_DATA</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a> = formatDataRequest-&gt;requestedFormatId;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="rdp__event_8c.html#ab5fe43c1b1b77c39f118d2581942eb81">remmina_rdp_event_queue_ui_sync_retint</a>(gp, ui);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">return</span> CHANNEL_RC_OK;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a010f06478881fa1942237c48a4605a23">  319</a></span>&#160;<span class="keyword">static</span> UINT <a class="code" href="rdp__cliprdr_8c.html#a010f06478881fa1942237c48a4605a23">remmina_rdp_cliprdr_server_format_data_response</a>(CliprdrClientContext* context, CLIPRDR_FORMAT_DATA_RESPONSE* formatDataResponse)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    UINT8* data;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">size_t</span> size;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    GdkPixbufLoader *pixbuf;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    gpointer output = NULL;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a> *ui;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    clipboard = (<a class="code" href="structrf__clipboard.html">rfClipboard</a>*)context-&gt;custom;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    gp = clipboard-&gt;<a class="code" href="structrf__clipboard.html#a268b5336ae92d8d2f54c5ee441325d68">rfi</a>-&gt;<a class="code" href="structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    data = formatDataResponse-&gt;requestedFormatData;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    size = formatDataResponse-&gt;dataLen;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// formatDataResponse-&gt;requestedFormatData is allocated</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">//  by freerdp and freed after returning from this callback function.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">//  So we must make a copy if we need to preserve it</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (size &gt; 0) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">switch</span> (rfi-&gt;<a class="code" href="structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a>) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">case</span> CF_UNICODETEXT:</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            size = ConvertFromUnicode(CP_UTF8, 0, (WCHAR*)data, size / 2, (CHAR**)&amp;output, 0, NULL, NULL);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <a class="code" href="rdp__cliprdr_8c.html#a55dec77cdcdc16a6d85680943eb2a859">crlf2lf</a>(output, &amp;size);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">case</span> CF_TEXT:</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_HTML:</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            output = (gpointer)calloc(1, size + 1);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span> (output) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                memcpy(output, data, size);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <a class="code" href="rdp__cliprdr_8c.html#a55dec77cdcdc16a6d85680943eb2a859">crlf2lf</a>(output, &amp;size);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">case</span> CF_DIBV5:</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">case</span> CF_DIB:</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            wStream* s;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            UINT32 offset;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            GError *perr;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            BITMAPINFOHEADER* pbi;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            BITMAPV5HEADER* pbi5;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            pbi = (BITMAPINFOHEADER*)data;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="comment">// offset calculation inspired by http://downloads.poolelan.com/MSDN/MSDNLibrary6/Disk1/Samples/VC/OS/WindowsXP/GetImage/BitmapUtil.cpp</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            offset = 14 + pbi-&gt;biSize;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> (pbi-&gt;biClrUsed != 0)</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                offset += <span class="keyword">sizeof</span>(RGBQUAD) * pbi-&gt;biClrUsed;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keywordflow">else</span> if (pbi-&gt;biBitCount &lt;= 8)</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                offset += <span class="keyword">sizeof</span>(RGBQUAD) * (1 &lt;&lt; pbi-&gt;biBitCount);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">if</span> (pbi-&gt;biSize == <span class="keyword">sizeof</span>(BITMAPINFOHEADER)) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">if</span> (pbi-&gt;biCompression == 3)         <span class="comment">// BI_BITFIELDS is 3</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    offset += 12;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pbi-&gt;biSize &gt;= <span class="keyword">sizeof</span>(BITMAPV5HEADER)) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                pbi5 = (BITMAPV5HEADER*)pbi;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="keywordflow">if</span> (pbi5-&gt;bV5ProfileData &lt;= offset)</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    offset += pbi5-&gt;bV5ProfileSize;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            s = Stream_New(NULL, 14 + size);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            Stream_Write_UINT8(s, <span class="charliteral">&#39;B&#39;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            Stream_Write_UINT8(s, <span class="charliteral">&#39;M&#39;</span>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            Stream_Write_UINT32(s, 14 + size);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            Stream_Write_UINT32(s, 0);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            Stream_Write_UINT32(s, offset);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            Stream_Write(s, data, size);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            data = Stream_Buffer(s);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            size = Stream_Length(s);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            pixbuf = gdk_pixbuf_loader_new();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            perr = NULL;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">if</span> ( !gdk_pixbuf_loader_write(pixbuf, data, size, &amp;perr) ) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <a class="code" href="remmina__sftp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a>-&gt;<a class="code" href="struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP] rdp_cliprdr: gdk_pixbuf_loader_write() returned error %s\n&quot;</span>, perr-&gt;message);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }<span class="keywordflow">else</span>  {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="keywordflow">if</span> ( !gdk_pixbuf_loader_close(pixbuf, &amp;perr) ) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    <a class="code" href="remmina__sftp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a>-&gt;<a class="code" href="struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP] rdp_cliprdr: gdk_pixbuf_loader_close() returned error %s\n&quot;</span>, perr-&gt;message);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    perr = NULL;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                Stream_Free(s, TRUE);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                output = g_object_ref(gdk_pixbuf_loader_get_pixbuf(pixbuf));</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            g_object_unref(pixbuf);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_PNG:</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_JPEG:</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            pixbuf = gdk_pixbuf_loader_new();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            gdk_pixbuf_loader_write(pixbuf, data, size, NULL);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            output = g_object_ref(gdk_pixbuf_loader_get_pixbuf(pixbuf));</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            gdk_pixbuf_loader_close(pixbuf, NULL);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            g_object_unref(pixbuf);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    pthread_mutex_lock(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#a5c6be1637ed9e2ce72ffde2ed5400205">transfer_clip_mutex</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    pthread_cond_signal(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#acf5bf9da1a18e21409c4b10368f8dfd7">transfer_clip_cond</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> ( clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> == SCDW_BUSY_WAIT ) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        clipboard-&gt;<a class="code" href="structrf__clipboard.html#ae14721fd73459cc2be441c96f5a96be7">srv_data</a> = output;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }<span class="keywordflow">else</span>  {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="comment">// Clipboard data arrived from server when we are not busywaiting.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="comment">// Just put it on the local clipboard</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        ui = g_new0(<a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f">REMMINA_RDP_UI_CLIPBOARD</a>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.clipboard = clipboard;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.type = <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a428268194cfa31b71241bdebf8359bbe">REMMINA_RDP_UI_CLIPBOARD_SET_CONTENT</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.data = output;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a> = clipboard-&gt;<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="rdp__event_8c.html#ab5fe43c1b1b77c39f118d2581942eb81">remmina_rdp_event_queue_ui_sync_retint</a>(gp, ui);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> = SCDW_NONE;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    pthread_mutex_unlock(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#a5c6be1637ed9e2ce72ffde2ed5400205">transfer_clip_mutex</a>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">return</span> CHANNEL_RC_OK;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a48904924b1064d1bb3bfb6116bac6bd3">  452</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a48904924b1064d1bb3bfb6116bac6bd3">remmina_rdp_cliprdr_request_data</a>(GtkClipboard *gtkClipboard, GtkSelectionData *selection_data, guint info, <a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp )</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;{</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">/* Called by GTK when someone press &quot;Paste&quot; on the client side.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">     * We ask to the server the data we need */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    GdkAtom target;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    CLIPRDR_FORMAT_DATA_REQUEST* pFormatDataRequest;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="structremmina__plugin__rdp__event.html">RemminaPluginRdpEvent</a> rdp_event = { 0 };</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">struct </span>timespec to;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    clipboard = &amp;(rfi-&gt;<a class="code" href="structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span> ( clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> != SCDW_NONE ) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="remmina__sftp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a>-&gt;<a class="code" href="struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP] Cannot paste now, I&#39;m transferring clipboard data from server. Try again later\n&quot;</span>);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    target = gtk_selection_data_get_target(selection_data);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// clipboard-&gt;format = remmina_rdp_cliprdr_get_format_from_gdkatom(target);</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    clipboard-&gt;<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a> = info;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">/* Request Clipboard content from the server, the request is async */</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    pthread_mutex_lock(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#a5c6be1637ed9e2ce72ffde2ed5400205">transfer_clip_mutex</a>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    pFormatDataRequest = (CLIPRDR_FORMAT_DATA_REQUEST*)malloc(<span class="keyword">sizeof</span>(CLIPRDR_FORMAT_DATA_REQUEST));</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    ZeroMemory(pFormatDataRequest, <span class="keyword">sizeof</span>(CLIPRDR_FORMAT_DATA_REQUEST));</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    pFormatDataRequest-&gt;requestedFormatId = clipboard-&gt;<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> = SCDW_BUSY_WAIT;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    rdp_event.<a class="code" href="structremmina__plugin__rdp__event.html#a84797e0cdf4484432740a8946325f126">type</a> = <a class="code" href="rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a899b766953e73fd8aa148a9d8f28434b">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_REQUEST</a>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    rdp_event.<a class="code" href="structremmina__plugin__rdp__event.html#a008a5e7caebab7b0a5d4f6a48b4c63f6">clipboard_formatdatarequest</a>.pFormatDataRequest = pFormatDataRequest;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="rdp__event_8c.html#ad446d6471bddba97f8bfcee8c51e4580">remmina_rdp_event_event_push</a>(gp, &amp;rdp_event);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">/* Busy wait clibpoard data for CLIPBOARD_TRANSFER_WAIT_TIME seconds */</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    gettimeofday(&amp;tv, NULL);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    to.tv_sec = tv.tv_sec + CLIPBOARD_TRANSFER_WAIT_TIME;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    to.tv_nsec = tv.tv_usec * 1000;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    rc = pthread_cond_timedwait(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#acf5bf9da1a18e21409c4b10368f8dfd7">transfer_clip_cond</a>, &amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#a5c6be1637ed9e2ce72ffde2ed5400205">transfer_clip_mutex</a>, &amp;to);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> ( rc == 0 ) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">/* Data has arrived without timeout */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">if</span> (clipboard-&gt;<a class="code" href="structrf__clipboard.html#ae14721fd73459cc2be441c96f5a96be7">srv_data</a> != NULL) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="keywordflow">if</span> (info == CB_FORMAT_PNG || info == CF_DIB || info == CF_DIBV5 || info == CB_FORMAT_JPEG) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                gtk_selection_data_set_pixbuf(selection_data, clipboard-&gt;<a class="code" href="structrf__clipboard.html#ae14721fd73459cc2be441c96f5a96be7">srv_data</a>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                g_object_unref(clipboard-&gt;<a class="code" href="structrf__clipboard.html#ae14721fd73459cc2be441c96f5a96be7">srv_data</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            }<span class="keywordflow">else</span>  {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                gtk_selection_data_set_text(selection_data, clipboard-&gt;<a class="code" href="structrf__clipboard.html#ae14721fd73459cc2be441c96f5a96be7">srv_data</a>, -1);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                free(clipboard-&gt;<a class="code" href="structrf__clipboard.html#ae14721fd73459cc2be441c96f5a96be7">srv_data</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> = SCDW_NONE;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> = SCDW_ASYNCWAIT;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> ( rc == ETIMEDOUT ) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <a class="code" href="remmina__sftp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a>-&gt;<a class="code" href="struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP] Clipboard data has not been transferred from the server in %d seconds. Try to paste later.\n&quot;</span>,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                CLIPBOARD_TRANSFER_WAIT_TIME);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        }<span class="keywordflow">else</span>  {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <a class="code" href="remmina__sftp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a>-&gt;<a class="code" href="struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP] internal error: pthread_cond_timedwait() returned %d\n&quot;</span>, rc);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> = SCDW_NONE;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    pthread_mutex_unlock(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#a5c6be1637ed9e2ce72ffde2ed5400205">transfer_clip_mutex</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a719b6820f66508f8acb943a1bf1a495d">  524</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a719b6820f66508f8acb943a1bf1a495d">remmina_rdp_cliprdr_empty_clipboard</a>(GtkClipboard *gtkClipboard, <a class="code" href="structrf__clipboard.html">rfClipboard</a> *clipboard)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">/* No need to do anything here */</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8h.html#accb7cad54767b8f658b8ea438690ef4f">  530</a></span>&#160;CLIPRDR_FORMAT_LIST *<a class="code" href="rdp__cliprdr_8c.html#accb7cad54767b8f658b8ea438690ef4f">remmina_rdp_cliprdr_get_client_format_list</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    GtkClipboard* gtkClipboard;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    GdkAtom* targets;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    gboolean result = 0;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    gint loccount, srvcount;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    gint formatId, i;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    CLIPRDR_FORMAT *formats;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keyword">struct </span>retp_t {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        CLIPRDR_FORMAT_LIST pFormatList;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        CLIPRDR_FORMAT formats[];</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    } *retp;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    clipboard = &amp;(rfi-&gt;<a class="code" href="structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    formats = NULL;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    retp = NULL;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    gtkClipboard = gtk_widget_get_clipboard(rfi-&gt;<a class="code" href="structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>, GDK_SELECTION_CLIPBOARD);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (gtkClipboard) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        result = gtk_clipboard_wait_for_targets(gtkClipboard, &amp;targets, &amp;loccount);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">if</span> (result &amp;&amp; loccount &gt; 0) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        formats = (CLIPRDR_FORMAT*)malloc(loccount * <span class="keyword">sizeof</span>(CLIPRDR_FORMAT));</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        srvcount = 0;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; loccount; i++) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            formatId = <a class="code" href="rdp__cliprdr_8c.html#a7eb7cd7eeab0e52c33721cc0564964ea">remmina_rdp_cliprdr_get_format_from_gdkatom</a>(targets[i]);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">if</span> ( formatId != 0 ) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                formats[srvcount].formatId = formatId;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                formats[srvcount].formatName = NULL;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                srvcount++;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">if</span> (srvcount &gt; 0) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            retp = (<span class="keyword">struct </span>retp_t *)malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> retp_t) + <span class="keyword">sizeof</span>(CLIPRDR_FORMAT) * srvcount);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            retp-&gt;pFormatList.formats = retp-&gt;formats;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            retp-&gt;pFormatList.numFormats = srvcount;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            memcpy(retp-&gt;formats, formats, <span class="keyword">sizeof</span>(CLIPRDR_FORMAT) * srvcount);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            retp = (<span class="keyword">struct </span>retp_t *)malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> retp_t));</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            retp-&gt;pFormatList.formats = NULL;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            retp-&gt;pFormatList.numFormats = 0;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        free(formats);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        retp = (<span class="keyword">struct </span>retp_t *)malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> retp_t) + <span class="keyword">sizeof</span>(CLIPRDR_FORMAT));</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        retp-&gt;pFormatList.formats = NULL;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        retp-&gt;pFormatList.numFormats = 0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (result)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        g_free(targets);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    retp-&gt;pFormatList.msgFlags = CB_RESPONSE_OK;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">return</span> (CLIPRDR_FORMAT_LIST*)retp;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;}</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a9d9b4fd8f4efbac086e3a2a274647ce5">  593</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a9d9b4fd8f4efbac086e3a2a274647ce5">remmina_rdp_cliprdr_mt_get_format_list</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;{</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#a6cdd472797d227d7ce79a312c0fa2a24">retptr</a> = (<span class="keywordtype">void</span>*)<a class="code" href="rdp__cliprdr_8c.html#accb7cad54767b8f658b8ea438690ef4f">remmina_rdp_cliprdr_get_client_format_list</a>(gp);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a1875ac25f73dd93e4b716746e7c6b8d5">  600</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a1875ac25f73dd93e4b716746e7c6b8d5">remmina_rdp_cliprdr_get_clipboard_data</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    GtkClipboard* gtkClipboard;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    UINT8* inbuf = NULL;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    UINT8* outbuf = NULL;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    GdkPixbuf *image = NULL;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordtype">int</span> size = 0;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="structremmina__plugin__rdp__event.html">RemminaPluginRdpEvent</a> rdp_event = { 0 };</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    CLIPRDR_FORMAT_DATA_RESPONSE* pFormatDataResponse;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    clipboard = ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.clipboard;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    gtkClipboard = gtk_widget_get_clipboard(rfi-&gt;<a class="code" href="structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>, GDK_SELECTION_CLIPBOARD);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (gtkClipboard) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">switch</span> (ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a>) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">case</span> CF_TEXT:</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">case</span> CF_UNICODETEXT:</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_HTML:</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            inbuf = (UINT8*)gtk_clipboard_wait_for_text(gtkClipboard);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_PNG:</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_JPEG:</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">case</span> CF_DIB:</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">case</span> CF_DIBV5:</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            image = gtk_clipboard_wait_for_image(gtkClipboard);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">/* No data received, send nothing */</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (inbuf != NULL || image != NULL) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">switch</span> (ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a>) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">case</span> CF_TEXT:</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_HTML:</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            size = strlen((<span class="keywordtype">char</span>*)inbuf);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            outbuf = <a class="code" href="rdp__cliprdr_8c.html#a4f9d059736e69df00273ec853d15c772">lf2crlf</a>(inbuf, &amp;size);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">case</span> CF_UNICODETEXT:</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            size = strlen((<span class="keywordtype">char</span>*)inbuf);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            inbuf = <a class="code" href="rdp__cliprdr_8c.html#a4f9d059736e69df00273ec853d15c772">lf2crlf</a>(inbuf, &amp;size);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            size = (ConvertToUnicode(CP_UTF8, 0, (CHAR*)inbuf, -1, (WCHAR**)&amp;outbuf, 0) ) * <span class="keyword">sizeof</span>(WCHAR);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            g_free(inbuf);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_PNG:</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            gchar* data;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            gsize buffersize;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            gdk_pixbuf_save_to_buffer(image, &amp;data, &amp;buffersize, <span class="stringliteral">&quot;png&quot;</span>, NULL, NULL);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            outbuf = (UINT8*)malloc(buffersize);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            memcpy(outbuf, data, buffersize);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            size = buffersize;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            g_object_unref(image);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">case</span> CB_FORMAT_JPEG:</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            gchar* data;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            gsize buffersize;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            gdk_pixbuf_save_to_buffer(image, &amp;data, &amp;buffersize, <span class="stringliteral">&quot;jpeg&quot;</span>, NULL, NULL);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            outbuf = (UINT8*)malloc(buffersize);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            memcpy(outbuf, data, buffersize);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            size = buffersize;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            g_object_unref(image);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordflow">case</span> CF_DIB:</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">case</span> CF_DIBV5:</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            gchar* data;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            gsize buffersize;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            gdk_pixbuf_save_to_buffer(image, &amp;data, &amp;buffersize, <span class="stringliteral">&quot;bmp&quot;</span>, NULL, NULL);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            size = buffersize - 14;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            outbuf = (UINT8*)malloc(size);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            memcpy(outbuf, data + 14, size);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            g_object_unref(image);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    pFormatDataResponse = (CLIPRDR_FORMAT_DATA_RESPONSE*)malloc(<span class="keyword">sizeof</span>(CLIPRDR_FORMAT_DATA_RESPONSE));</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (!pFormatDataResponse) {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">if</span> (outbuf) free(outbuf);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    ZeroMemory(pFormatDataResponse, <span class="keyword">sizeof</span>(CLIPRDR_FORMAT_DATA_RESPONSE));</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    rdp_event.<a class="code" href="structremmina__plugin__rdp__event.html#a84797e0cdf4484432740a8946325f126">type</a> = <a class="code" href="rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a2e49b2022527a7f87ba0115e644d16d6">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_RESPONSE</a>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    rdp_event.<a class="code" href="structremmina__plugin__rdp__event.html#af6744820a897cbe91a79cf3e78b3e494">clipboard_formatdataresponse</a>.pFormatDataResponse = pFormatDataResponse;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    pFormatDataResponse-&gt;msgFlags = CB_RESPONSE_OK;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    pFormatDataResponse-&gt;dataLen = size;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    pFormatDataResponse-&gt;requestedFormatData = outbuf;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="rdp__event_8c.html#ad446d6471bddba97f8bfcee8c51e4580">remmina_rdp_event_event_push</a>(gp, &amp;rdp_event);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#ac3bc1f06354bf50b72d770f6d14ce0b3">  707</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#ac3bc1f06354bf50b72d770f6d14ce0b3">remmina_rdp_cliprdr_set_clipboard_content</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui)</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;{</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    GtkClipboard* gtkClipboard;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    gtkClipboard = gtk_widget_get_clipboard(rfi-&gt;<a class="code" href="structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>, GDK_SELECTION_CLIPBOARD);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a> == CB_FORMAT_PNG || ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a> == CF_DIB || ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a> == CF_DIBV5 || ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.<a class="code" href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">format</a> == CB_FORMAT_JPEG) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        gtk_clipboard_set_image( gtkClipboard, ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.data );</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        g_object_unref(ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.data);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }<span class="keywordflow">else</span>  {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        gtk_clipboard_set_text( gtkClipboard, ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.data, -1 );</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        free(ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.data);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a007ce9136242f75dc148bd4e2ee5fde5">  724</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a007ce9136242f75dc148bd4e2ee5fde5">remmina_rdp_cliprdr_set_clipboard_data</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;{</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    GtkClipboard* gtkClipboard;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    GtkTargetEntry* targets;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    gint n_targets;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    clipboard = ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.clipboard;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    targets = gtk_target_table_new_from_list(ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.targetlist, &amp;n_targets);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    gtkClipboard = gtk_widget_get_clipboard(rfi-&gt;<a class="code" href="structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>, GDK_SELECTION_CLIPBOARD);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (gtkClipboard &amp;&amp; targets) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        gtk_clipboard_set_with_owner(gtkClipboard, targets, n_targets,</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            (GtkClipboardGetFunc)<a class="code" href="rdp__cliprdr_8c.html#a48904924b1064d1bb3bfb6116bac6bd3">remmina_rdp_cliprdr_request_data</a>,</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            (GtkClipboardClearFunc)<a class="code" href="rdp__cliprdr_8c.html#a719b6820f66508f8acb943a1bf1a495d">remmina_rdp_cliprdr_empty_clipboard</a>, G_OBJECT(gp));</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        gtk_target_table_free(targets, n_targets);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8c.html#a9a632fe72a00f2aef95b884a0dc60912">  744</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a9a632fe72a00f2aef95b884a0dc60912">remmina_rdp_cliprdr_detach_owner</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui)</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">/* When closing a rdp connection, we should check if gp is a clipboard owner.</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">     * If it&#39;s an owner, detach it from the clipboard */</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="structrf__context.html">rfContext</a>* rfi = GET_PLUGIN_DATA(gp);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    GtkClipboard* gtkClipboard;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    gtkClipboard = gtk_widget_get_clipboard(rfi-&gt;<a class="code" href="structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>, GDK_SELECTION_CLIPBOARD);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> (gtkClipboard &amp;&amp; gtk_clipboard_get_owner(gtkClipboard) == (GObject*)gp) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        gtk_clipboard_clear(gtkClipboard);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8h.html#ad4fad618198e7746ea1e4ebd01a9b173">  759</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#ad4fad618198e7746ea1e4ebd01a9b173">remmina_rdp_event_process_clipboard</a>(<a class="code" href="struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <a class="code" href="structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">switch</span> (ui-&gt;<a class="code" href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.type) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a6ed2696cd28620a9d41f501fe22162bc">REMMINA_RDP_UI_CLIPBOARD_FORMATLIST</a>:</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="rdp__cliprdr_8c.html#a9d9b4fd8f4efbac086e3a2a274647ce5">remmina_rdp_cliprdr_mt_get_format_list</a>(gp, ui);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a8d48530ae1a868c40e3804aa2df205c7">REMMINA_RDP_UI_CLIPBOARD_GET_DATA</a>:</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <a class="code" href="rdp__cliprdr_8c.html#a1875ac25f73dd93e4b716746e7c6b8d5">remmina_rdp_cliprdr_get_clipboard_data</a>(gp, ui);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a8d1ee3147da1c703472c152799330dad">REMMINA_RDP_UI_CLIPBOARD_SET_DATA</a>:</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="rdp__cliprdr_8c.html#a007ce9136242f75dc148bd4e2ee5fde5">remmina_rdp_cliprdr_set_clipboard_data</a>(gp, ui);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a428268194cfa31b71241bdebf8359bbe">REMMINA_RDP_UI_CLIPBOARD_SET_CONTENT</a>:</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="rdp__cliprdr_8c.html#ac3bc1f06354bf50b72d770f6d14ce0b3">remmina_rdp_cliprdr_set_clipboard_content</a>(gp, ui);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a7e7b3ee1f3eef5387c1d3f315cff3f01">REMMINA_RDP_UI_CLIPBOARD_DETACH_OWNER</a>:</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <a class="code" href="rdp__cliprdr_8c.html#a9a632fe72a00f2aef95b884a0dc60912">remmina_rdp_cliprdr_detach_owner</a>(gp, ui);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8h.html#ac3300142e3c2f416896948681ecd45f3">  787</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#ac3300142e3c2f416896948681ecd45f3">remmina_rdp_clipboard_init</a>(<a class="code" href="structrf__context.html">rfContext</a> *rfi)</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;{</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">// Future: initialize rfi-&gt;clipboard</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div><div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8h.html#a4da95b96bf2c86b8f4cc63dcafdd1365">  792</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a4da95b96bf2c86b8f4cc63dcafdd1365">remmina_rdp_clipboard_free</a>(<a class="code" href="structrf__context.html">rfContext</a> *rfi)</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;{</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">// Future: deinitialize rfi-&gt;clipboard</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;}</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno"><a class="line" href="rdp__cliprdr_8h.html#a9425378cc9b2da11eb4b866c8069e4aa">  799</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="rdp__cliprdr_8c.html#a2c900a8369c1081e3084f5b17efbe47d">remmina_rdp_cliprdr_init</a>(<a class="code" href="structrf__context.html">rfContext</a>* rfi, CliprdrClientContext* cliprdr)</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;{</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    TRACE_CALL(__func__);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="structrf__clipboard.html">rfClipboard</a>* clipboard;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    clipboard = &amp;(rfi-&gt;<a class="code" href="structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    rfi-&gt;<a class="code" href="structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="structrf__clipboard.html#a268b5336ae92d8d2f54c5ee441325d68">rfi</a> = rfi;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    cliprdr-&gt;custom = (<span class="keywordtype">void</span>*)clipboard;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    clipboard-&gt;<a class="code" href="structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a> = cliprdr;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    pthread_mutex_init(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#a5c6be1637ed9e2ce72ffde2ed5400205">transfer_clip_mutex</a>, NULL);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    pthread_cond_init(&amp;clipboard-&gt;<a class="code" href="structrf__clipboard.html#acf5bf9da1a18e21409c4b10368f8dfd7">transfer_clip_cond</a>, NULL);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    clipboard-&gt;<a class="code" href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">srv_clip_data_wait</a> = SCDW_NONE;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    cliprdr-&gt;MonitorReady = <a class="code" href="rdp__cliprdr_8c.html#a5c9890f4354ef9a8dedcf3a371a2a16f">remmina_rdp_cliprdr_monitor_ready</a>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    cliprdr-&gt;ServerCapabilities = <a class="code" href="rdp__cliprdr_8c.html#ab8dbdd80d3da147e6a65dd9f943f5e42">remmina_rdp_cliprdr_server_capabilities</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    cliprdr-&gt;ServerFormatList = <a class="code" href="rdp__cliprdr_8c.html#aad8017b7ae0935c5266e7777dae3c3d4">remmina_rdp_cliprdr_server_format_list</a>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    cliprdr-&gt;ServerFormatListResponse = <a class="code" href="rdp__cliprdr_8c.html#a989aa6f897e6bade4870d577eee5bec9">remmina_rdp_cliprdr_server_format_list_response</a>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    cliprdr-&gt;ServerFormatDataRequest = <a class="code" href="rdp__cliprdr_8c.html#a3a346af4c3c92ec71797838ecc69bdae">remmina_rdp_cliprdr_server_format_data_request</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    cliprdr-&gt;ServerFormatDataResponse = <a class="code" href="rdp__cliprdr_8c.html#a010f06478881fa1942237c48a4605a23">remmina_rdp_cliprdr_server_format_data_response</a>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">//  cliprdr-&gt;ServerFileContentsRequest = remmina_rdp_cliprdr_server_file_contents_request;</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">//  cliprdr-&gt;ServerFileContentsResponse = remmina_rdp_cliprdr_server_file_contents_response;</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="ttc" id="rdp__cliprdr_8c_html_ac3bc1f06354bf50b72d770f6d14ce0b3"><div class="ttname"><a href="rdp__cliprdr_8c.html#ac3bc1f06354bf50b72d770f6d14ce0b3">remmina_rdp_cliprdr_set_clipboard_content</a></div><div class="ttdeci">void remmina_rdp_cliprdr_set_clipboard_content(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00707">rdp_cliprdr.c:707</a></div></div>
<div class="ttc" id="structrf__clipboard_html_a773214c0bb4f351a609a085f786304aa"><div class="ttname"><a href="structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">rf_clipboard::context</a></div><div class="ttdeci">CliprdrClientContext * context</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00070">rdp_plugin.h:70</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html_a6cdd472797d227d7ce79a312c0fa2a24"><div class="ttname"><a href="structremmina__plugin__rdp__ui__object.html#a6cdd472797d227d7ce79a312c0fa2a24">remmina_plugin_rdp_ui_object::retptr</a></div><div class="ttdeci">void * retptr</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00231">rdp_plugin.h:231</a></div></div>
<div class="ttc" id="structrf__context_html_af40c80ff8296b9bcc3ac437bf0be55f8"><div class="ttname"><a href="structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">rf_context::is_reconnecting</a></div><div class="ttdeci">gboolean is_reconnecting</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00258">rdp_plugin.h:258</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_aad8017b7ae0935c5266e7777dae3c3d4"><div class="ttname"><a href="rdp__cliprdr_8c.html#aad8017b7ae0935c5266e7777dae3c3d4">remmina_rdp_cliprdr_server_format_list</a></div><div class="ttdeci">static UINT remmina_rdp_cliprdr_server_format_list(CliprdrClientContext *context, CLIPRDR_FORMAT_LIST *formatList)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00224">rdp_cliprdr.c:224</a></div></div>
<div class="ttc" id="structrf__context_html"><div class="ttname"><a href="structrf__context.html">rf_context</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00234">rdp_plugin.h:234</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a660e39f442c17f4668addc15ea5f6b9b"><div class="ttname"><a href="rdp__cliprdr_8c.html#a660e39f442c17f4668addc15ea5f6b9b">remmina_rdp_cliprdr_server_file_contents_response</a></div><div class="ttdeci">int remmina_rdp_cliprdr_server_file_contents_response(CliprdrClientContext *context, CLIPRDR_FILE_CONTENTS_RESPONSE *fileContentsResponse)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00153">rdp_cliprdr.c:153</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a8afec91e9f54fc3a0ea8f25d8349bd8b"><div class="ttname"><a href="rdp__cliprdr_8c.html#a8afec91e9f54fc3a0ea8f25d8349bd8b">remmina_rdp_cliprdr_send_client_format_list</a></div><div class="ttdeci">void remmina_rdp_cliprdr_send_client_format_list(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00159">rdp_cliprdr.c:159</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html"><div class="ttname"><a href="structremmina__plugin__rdp__event.html">remmina_plugin_rdp_event</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00116">rdp_plugin.h:116</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a4f9d059736e69df00273ec853d15c772"><div class="ttname"><a href="rdp__cliprdr_8c.html#a4f9d059736e69df00273ec853d15c772">lf2crlf</a></div><div class="ttdeci">static UINT8 * lf2crlf(UINT8 *data, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00095">rdp_cliprdr.c:95</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7a899b766953e73fd8aa148a9d8f28434b"><div class="ttname"><a href="rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a899b766953e73fd8aa148a9d8f28434b">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_REQUEST</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00112">rdp_plugin.h:112</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a2c900a8369c1081e3084f5b17efbe47d"><div class="ttname"><a href="rdp__cliprdr_8c.html#a2c900a8369c1081e3084f5b17efbe47d">remmina_rdp_cliprdr_init</a></div><div class="ttdeci">void remmina_rdp_cliprdr_init(rfContext *rfi, CliprdrClientContext *cliprdr)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00799">rdp_cliprdr.c:799</a></div></div>
<div class="ttc" id="structrf__clipboard_html_a5c6be1637ed9e2ce72ffde2ed5400205"><div class="ttname"><a href="structrf__clipboard.html#a5c6be1637ed9e2ce72ffde2ed5400205">rf_clipboard::transfer_clip_mutex</a></div><div class="ttdeci">pthread_mutex_t transfer_clip_mutex</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00077">rdp_plugin.h:77</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7aebb0df0651989a89f3f05e3c4894dd50"><div class="ttname"><a href="rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7aebb0df0651989a89f3f05e3c4894dd50">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_LIST</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00110">rdp_plugin.h:110</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html"><div class="ttname"><a href="structremmina__plugin__rdp__ui__object.html">remmina_plugin_rdp_ui_object</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00183">rdp_plugin.h:183</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a2ec603ddb273c9729c7694f1c88665d8"><div class="ttname"><a href="struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">_RemminaPluginService::log_printf</a></div><div class="ttdeci">void(* log_printf)(const gchar *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="plugin_8h_source.html#l00212">plugin.h:212</a></div></div>
<div class="ttc" id="rdp__event_8c_html_adaaf3de8342309cc52668f318a473350"><div class="ttname"><a href="rdp__event_8c.html#adaaf3de8342309cc52668f318a473350">remmina_rdp_event_queue_ui_sync_retptr</a></div><div class="ttdeci">void * remmina_rdp_event_queue_ui_sync_retptr(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__event_8c_source.html#l01169">rdp_event.c:1169</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html_ab65c695a6089cb396a239ceb3b39416a"><div class="ttname"><a href="structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">remmina_plugin_rdp_ui_object::clipboard</a></div><div class="ttdeci">rfClipboard * clipboard</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00217">rdp_plugin.h:217</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a55dec77cdcdc16a6d85680943eb2a859"><div class="ttname"><a href="rdp__cliprdr_8c.html#a55dec77cdcdc16a6d85680943eb2a859">crlf2lf</a></div><div class="ttdeci">static void crlf2lf(UINT8 *data, size_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00127">rdp_cliprdr.c:127</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_ac3300142e3c2f416896948681ecd45f3"><div class="ttname"><a href="rdp__cliprdr_8c.html#ac3300142e3c2f416896948681ecd45f3">remmina_rdp_clipboard_init</a></div><div class="ttdeci">void remmina_rdp_clipboard_init(rfContext *rfi)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00787">rdp_cliprdr.c:787</a></div></div>
<div class="ttc" id="structrf__context_html_a05f37c213b04dfb9ae9b38c12bcdf7e3"><div class="ttname"><a href="structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">rf_context::protocol_widget</a></div><div class="ttdeci">RemminaProtocolWidget * protocol_widget</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00237">rdp_plugin.h:237</a></div></div>
<div class="ttc" id="structrf__clipboard_html_a268b5336ae92d8d2f54c5ee441325d68"><div class="ttname"><a href="structrf__clipboard.html#a268b5336ae92d8d2f54c5ee441325d68">rf_clipboard::rfi</a></div><div class="ttdeci">rfContext * rfi</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00069">rdp_plugin.h:69</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a48904924b1064d1bb3bfb6116bac6bd3"><div class="ttname"><a href="rdp__cliprdr_8c.html#a48904924b1064d1bb3bfb6116bac6bd3">remmina_rdp_cliprdr_request_data</a></div><div class="ttdeci">void remmina_rdp_cliprdr_request_data(GtkClipboard *gtkClipboard, GtkSelectionData *selection_data, guint info, RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00452">rdp_cliprdr.c:452</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_ab8dbdd80d3da147e6a65dd9f943f5e42"><div class="ttname"><a href="rdp__cliprdr_8c.html#ab8dbdd80d3da147e6a65dd9f943f5e42">remmina_rdp_cliprdr_server_capabilities</a></div><div class="ttdeci">static UINT remmina_rdp_cliprdr_server_capabilities(CliprdrClientContext *context, CLIPRDR_CAPABILITIES *capabilities)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00217">rdp_cliprdr.c:217</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7a2e49b2022527a7f87ba0115e644d16d6"><div class="ttname"><a href="rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a2e49b2022527a7f87ba0115e644d16d6">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_RESPONSE</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00111">rdp_plugin.h:111</a></div></div>
<div class="ttc" id="structrf__clipboard_html_ae14721fd73459cc2be441c96f5a96be7"><div class="ttname"><a href="structrf__clipboard.html#ae14721fd73459cc2be441c96f5a96be7">rf_clipboard::srv_data</a></div><div class="ttdeci">gpointer srv_data</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00080">rdp_plugin.h:80</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_af6744820a897cbe91a79cf3e78b3e494"><div class="ttname"><a href="structremmina__plugin__rdp__event.html#af6744820a897cbe91a79cf3e78b3e494">remmina_plugin_rdp_event::clipboard_formatdataresponse</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@42::@47 clipboard_formatdataresponse</div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_ad4fad618198e7746ea1e4ebd01a9b173"><div class="ttname"><a href="rdp__cliprdr_8c.html#ad4fad618198e7746ea1e4ebd01a9b173">remmina_rdp_event_process_clipboard</a></div><div class="ttdeci">void remmina_rdp_event_process_clipboard(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00759">rdp_cliprdr.c:759</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html"><div class="ttname"><a href="rdp__plugin_8h.html">rdp_plugin.h</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a051d1d2ab58b0119d656f5036277b7c6a6ed2696cd28620a9d41f501fe22162bc"><div class="ttname"><a href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a6ed2696cd28620a9d41f501fe22162bc">REMMINA_RDP_UI_CLIPBOARD_FORMATLIST</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00163">rdp_plugin.h:163</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a84797e0cdf4484432740a8946325f126"><div class="ttname"><a href="structremmina__plugin__rdp__event.html#a84797e0cdf4484432740a8946325f126">remmina_plugin_rdp_event::type</a></div><div class="ttdeci">RemminaPluginRdpEventType type</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00117">rdp_plugin.h:117</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a051d1d2ab58b0119d656f5036277b7c6a8d1ee3147da1c703472c152799330dad"><div class="ttname"><a href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a8d1ee3147da1c703472c152799330dad">REMMINA_RDP_UI_CLIPBOARD_SET_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00165">rdp_plugin.h:165</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a007ce9136242f75dc148bd4e2ee5fde5"><div class="ttname"><a href="rdp__cliprdr_8c.html#a007ce9136242f75dc148bd4e2ee5fde5">remmina_rdp_cliprdr_set_clipboard_data</a></div><div class="ttdeci">void remmina_rdp_cliprdr_set_clipboard_data(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00724">rdp_cliprdr.c:724</a></div></div>
<div class="ttc" id="structrf__clipboard_html_acf5bf9da1a18e21409c4b10368f8dfd7"><div class="ttname"><a href="structrf__clipboard.html#acf5bf9da1a18e21409c4b10368f8dfd7">rf_clipboard::transfer_clip_cond</a></div><div class="ttdeci">pthread_cond_t transfer_clip_cond</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00078">rdp_plugin.h:78</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a9d9b4fd8f4efbac086e3a2a274647ce5"><div class="ttname"><a href="rdp__cliprdr_8c.html#a9d9b4fd8f4efbac086e3a2a274647ce5">remmina_rdp_cliprdr_mt_get_format_list</a></div><div class="ttdeci">static void remmina_rdp_cliprdr_mt_get_format_list(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00593">rdp_cliprdr.c:593</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f"><div class="ttname"><a href="rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f">REMMINA_RDP_UI_CLIPBOARD</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00158">rdp_plugin.h:158</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a3a346af4c3c92ec71797838ecc69bdae"><div class="ttname"><a href="rdp__cliprdr_8c.html#a3a346af4c3c92ec71797838ecc69bdae">remmina_rdp_cliprdr_server_format_data_request</a></div><div class="ttdeci">static UINT remmina_rdp_cliprdr_server_format_data_request(CliprdrClientContext *context, CLIPRDR_FORMAT_DATA_REQUEST *formatDataRequest)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00298">rdp_cliprdr.c:298</a></div></div>
<div class="ttc" id="remmina__sftp__plugin_8c_html_a9493664f6bdafe3f5b593c3e5e1eacc7"><div class="ttname"><a href="remmina__sftp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a></div><div class="ttdeci">static RemminaPluginService * remmina_plugin_service</div><div class="ttdef"><b>Definition:</b> <a href="remmina__sftp__plugin_8c_source.html#l00064">remmina_sftp_plugin.c:64</a></div></div>
<div class="ttc" id="structrf__context_html_acee2095e72fb2428c498f62e21800026"><div class="ttname"><a href="structrf__context.html#acee2095e72fb2428c498f62e21800026">rf_context::drawing_area</a></div><div class="ttdeci">GtkWidget * drawing_area</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00263">rdp_plugin.h:263</a></div></div>
<div class="ttc" id="rdp__event_8c_html_ab5fe43c1b1b77c39f118d2581942eb81"><div class="ttname"><a href="rdp__event_8c.html#ab5fe43c1b1b77c39f118d2581942eb81">remmina_rdp_event_queue_ui_sync_retint</a></div><div class="ttdeci">int remmina_rdp_event_queue_ui_sync_retint(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__event_8c_source.html#l01158">rdp_event.c:1158</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a9a632fe72a00f2aef95b884a0dc60912"><div class="ttname"><a href="rdp__cliprdr_8c.html#a9a632fe72a00f2aef95b884a0dc60912">remmina_rdp_cliprdr_detach_owner</a></div><div class="ttdeci">static void remmina_rdp_cliprdr_detach_owner(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00744">rdp_cliprdr.c:744</a></div></div>
<div class="ttc" id="struct___remmina_protocol_widget_html"><div class="ttname"><a href="struct___remmina_protocol_widget.html">_RemminaProtocolWidget</a></div><div class="ttdef"><b>Definition:</b> <a href="remmina__protocol__widget_8h_source.html#l00057">remmina_protocol_widget.h:57</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_aca54116b93ed1fb466951e51a32f6934"><div class="ttname"><a href="rdp__cliprdr_8c.html#aca54116b93ed1fb466951e51a32f6934">remmina_rdp_cliprdr_server_file_contents_request</a></div><div class="ttdeci">int remmina_rdp_cliprdr_server_file_contents_request(CliprdrClientContext *context, CLIPRDR_FILE_CONTENTS_REQUEST *fileContentsRequest)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00148">rdp_cliprdr.c:148</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a1c95eb50a82dbeac3c43374eaad8e489"><div class="ttname"><a href="rdp__cliprdr_8c.html#a1c95eb50a82dbeac3c43374eaad8e489">remmina_rdp_cliprdr_send_client_capabilities</a></div><div class="ttdeci">static void remmina_rdp_cliprdr_send_client_capabilities(rfClipboard *clipboard)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00185">rdp_cliprdr.c:185</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a989aa6f897e6bade4870d577eee5bec9"><div class="ttname"><a href="rdp__cliprdr_8c.html#a989aa6f897e6bade4870d577eee5bec9">remmina_rdp_cliprdr_server_format_list_response</a></div><div class="ttdeci">static UINT remmina_rdp_cliprdr_server_format_list_response(CliprdrClientContext *context, CLIPRDR_FORMAT_LIST_RESPONSE *formatListResponse)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00291">rdp_cliprdr.c:291</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a051d1d2ab58b0119d656f5036277b7c6a8d48530ae1a868c40e3804aa2df205c7"><div class="ttname"><a href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a8d48530ae1a868c40e3804aa2df205c7">REMMINA_RDP_UI_CLIPBOARD_GET_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00164">rdp_plugin.h:164</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a72cd3fa2cc46eb03de7f68d63b2646b2"><div class="ttname"><a href="structremmina__plugin__rdp__event.html#a72cd3fa2cc46eb03de7f68d63b2646b2">remmina_plugin_rdp_event::clipboard_formatlist</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@42::@46 clipboard_formatlist</div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a719b6820f66508f8acb943a1bf1a495d"><div class="ttname"><a href="rdp__cliprdr_8c.html#a719b6820f66508f8acb943a1bf1a495d">remmina_rdp_cliprdr_empty_clipboard</a></div><div class="ttdeci">void remmina_rdp_cliprdr_empty_clipboard(GtkClipboard *gtkClipboard, rfClipboard *clipboard)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00524">rdp_cliprdr.c:524</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a051d1d2ab58b0119d656f5036277b7c6a428268194cfa31b71241bdebf8359bbe"><div class="ttname"><a href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a428268194cfa31b71241bdebf8359bbe">REMMINA_RDP_UI_CLIPBOARD_SET_CONTENT</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00166">rdp_plugin.h:166</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_accb7cad54767b8f658b8ea438690ef4f"><div class="ttname"><a href="rdp__cliprdr_8c.html#accb7cad54767b8f658b8ea438690ef4f">remmina_rdp_cliprdr_get_client_format_list</a></div><div class="ttdeci">CLIPRDR_FORMAT_LIST * remmina_rdp_cliprdr_get_client_format_list(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00530">rdp_cliprdr.c:530</a></div></div>
<div class="ttc" id="structrf__context_html_a72d2a3d60347327237692947df93aea7"><div class="ttname"><a href="structrf__context.html#a72d2a3d60347327237692947df93aea7">rf_context::clipboard</a></div><div class="ttdeci">rfClipboard clipboard</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00296">rdp_plugin.h:296</a></div></div>
<div class="ttc" id="structrf__clipboard_html"><div class="ttname"><a href="structrf__clipboard.html">rf_clipboard</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00068">rdp_plugin.h:68</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a008a5e7caebab7b0a5d4f6a48b4c63f6"><div class="ttname"><a href="structremmina__plugin__rdp__event.html#a008a5e7caebab7b0a5d4f6a48b4c63f6">remmina_plugin_rdp_event::clipboard_formatdatarequest</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@42::@48 clipboard_formatdatarequest</div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a4da95b96bf2c86b8f4cc63dcafdd1365"><div class="ttname"><a href="rdp__cliprdr_8c.html#a4da95b96bf2c86b8f4cc63dcafdd1365">remmina_rdp_clipboard_free</a></div><div class="ttdeci">void remmina_rdp_clipboard_free(rfContext *rfi)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00792">rdp_cliprdr.c:792</a></div></div>
<div class="ttc" id="structrf__context_html_a3c2ffa55ba97bc70324d61b8cc838e73"><div class="ttname"><a href="structrf__context.html#a3c2ffa55ba97bc70324d61b8cc838e73">rf_context::connected</a></div><div class="ttdeci">gboolean connected</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00257">rdp_plugin.h:257</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a5378f6a230a35d2a84e94ee029a10af4"><div class="ttname"><a href="rdp__cliprdr_8c.html#a5378f6a230a35d2a84e94ee029a10af4">remmina_rdp_cliprdr_get_target_types</a></div><div class="ttdeci">void remmina_rdp_cliprdr_get_target_types(UINT32 **formats, UINT16 *size, GdkAtom *types, int count)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00076">rdp_cliprdr.c:76</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a5c9890f4354ef9a8dedcf3a371a2a16f"><div class="ttname"><a href="rdp__cliprdr_8c.html#a5c9890f4354ef9a8dedcf3a371a2a16f">remmina_rdp_cliprdr_monitor_ready</a></div><div class="ttdeci">static UINT remmina_rdp_cliprdr_monitor_ready(CliprdrClientContext *context, CLIPRDR_MONITOR_READY *monitorReady)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00204">rdp_cliprdr.c:204</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a051d1d2ab58b0119d656f5036277b7c6a7e7b3ee1f3eef5387c1d3f315cff3f01"><div class="ttname"><a href="rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a7e7b3ee1f3eef5387c1d3f315cff3f01">REMMINA_RDP_UI_CLIPBOARD_DETACH_OWNER</a></div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00167">rdp_plugin.h:167</a></div></div>
<div class="ttc" id="rdp__cliprdr_8h_html"><div class="ttname"><a href="rdp__cliprdr_8h.html">rdp_cliprdr.h</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a010f06478881fa1942237c48a4605a23"><div class="ttname"><a href="rdp__cliprdr_8c.html#a010f06478881fa1942237c48a4605a23">remmina_rdp_cliprdr_server_format_data_response</a></div><div class="ttdeci">static UINT remmina_rdp_cliprdr_server_format_data_response(CliprdrClientContext *context, CLIPRDR_FORMAT_DATA_RESPONSE *formatDataResponse)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00319">rdp_cliprdr.c:319</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a1875ac25f73dd93e4b716746e7c6b8d5"><div class="ttname"><a href="rdp__cliprdr_8c.html#a1875ac25f73dd93e4b716746e7c6b8d5">remmina_rdp_cliprdr_get_clipboard_data</a></div><div class="ttdeci">void remmina_rdp_cliprdr_get_clipboard_data(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00600">rdp_cliprdr.c:600</a></div></div>
<div class="ttc" id="structrf__clipboard_html_ad22c0f3cd325db2746e9ca42cca0d65b"><div class="ttname"><a href="structrf__clipboard.html#ad22c0f3cd325db2746e9ca42cca0d65b">rf_clipboard::format</a></div><div class="ttdeci">UINT32 format</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00074">rdp_plugin.h:74</a></div></div>
<div class="ttc" id="rdp__event_8c_html_ad446d6471bddba97f8bfcee8c51e4580"><div class="ttname"><a href="rdp__event_8c.html#ad446d6471bddba97f8bfcee8c51e4580">remmina_rdp_event_event_push</a></div><div class="ttdeci">void remmina_rdp_event_event_push(RemminaProtocolWidget *gp, const RemminaPluginRdpEvent *e)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__event_8c_source.html#l00090">rdp_event.c:90</a></div></div>
<div class="ttc" id="rdp__event_8h_html"><div class="ttname"><a href="rdp__event_8h.html">rdp_event.h</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a7eb7cd7eeab0e52c33721cc0564964ea"><div class="ttname"><a href="rdp__cliprdr_8c.html#a7eb7cd7eeab0e52c33721cc0564964ea">remmina_rdp_cliprdr_get_format_from_gdkatom</a></div><div class="ttdeci">UINT32 remmina_rdp_cliprdr_get_format_from_gdkatom(GdkAtom atom)</div><div class="ttdef"><b>Definition:</b> <a href="rdp__cliprdr_8c_source.html#l00048">rdp_cliprdr.c:48</a></div></div>
<div class="ttc" id="structrf__clipboard_html_aed59c73dc8dafbc915eb7db687221e89"><div class="ttname"><a href="structrf__clipboard.html#aed59c73dc8dafbc915eb7db687221e89">rf_clipboard::srv_clip_data_wait</a></div><div class="ttdeci">enum rf_clipboard::@41 srv_clip_data_wait</div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html_a46d939889fba73c1360f924efaa09262"><div class="ttname"><a href="structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">remmina_plugin_rdp_ui_object::type</a></div><div class="ttdeci">RemminaPluginRdpUiType type</div><div class="ttdef"><b>Definition:</b> <a href="rdp__plugin_8h_source.html#l00184">rdp_plugin.h:184</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0136ed835ef94417d8a105e5466435bb.html">remmina-plugins</a></li><li class="navelem"><a class="el" href="dir_7860dafb121181d326a4eecf445876a9.html">rdp</a></li><li class="navelem"><a class="el" href="rdp__cliprdr_8c.html">rdp_cliprdr.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
