<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Remmina - The GTK+ Remote Desktop Client: rdp_plugin.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../remmina.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Remmina - The GTK+ Remote Desktop Client
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">Remmina is a remote desktop client written in GTK+, aiming to be useful for system administrators and travellers, who need to work with lots of remote computers in front of either large monitors or tiny netbooks. Remmina supports multiple network protocols in an integrated and consistent user interface. Currently RDP, VNC, NX, XDMCP and SSH are supported.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/db5/rdp__plugin_8c_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">rdp_plugin.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/db5/rdp__plugin_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Remmina - The GTK+ Remote Desktop Client</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) 2010-2011 Vic Lee</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2014-2015 Antenore Gatta, Fabio Castelli, Giovanni Panozzo</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (C) 2016-2017 Antenore Gatta, Giovanni Panozzo</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * (at your option) any later version.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * GNU General Public License for more details.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Boston, MA  02110-1301, USA.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *  In addition, as a special exception, the copyright holders give</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *  permission to link the code of portions of this program with the</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *  OpenSSL library under certain conditions as described in each</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *  individual source file, and distribute linked combinations</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *  including the two.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *  You must obey the GNU General Public License in all respects</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *  for all of the code used other than OpenSSL. *  If you modify</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *  file(s) with this exception, you may extend this exception to your</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *  version of the file(s), but you are not obligated to do so. *  If you</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *  do not wish to do so, delete this exception statement from your</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> *  version. *  If you delete this exception statement from all source</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> *  files in the program, then also delete it here.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dc9/rdp__plugin_8h.html">rdp_plugin.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d05/rdp__event_8h.html">rdp_event.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d13/rdp__graphics_8h.html">rdp_graphics.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d90/rdp__file_8h.html">rdp_file.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/ddc/rdp__settings_8h.html">rdp_settings.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dbb/rdp__cliprdr_8h.html">rdp_cliprdr.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dd7/rdp__channels_8h.html">rdp_channels.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;cairo/cairo-xlib.h&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;freerdp/freerdp.h&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;freerdp/constants.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;freerdp/client/cliprdr.h&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;freerdp/client/channels.h&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;freerdp/client/cmdline.h&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;freerdp/error.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;winpr/memory.h&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#a88dc1df9d8cfdcf67ddac10dcafd8b82">   57</a></span>&#160;<span class="preprocessor">#define REMMINA_RDP_FEATURE_TOOL_REFRESH         1</span></div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#aa0f211a8cbe456889d17eadc20e728c6">   58</a></span>&#160;<span class="preprocessor">#define REMMINA_RDP_FEATURE_SCALE                2</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#ae92439cbe502ccd966ff82177b38f576">   59</a></span>&#160;<span class="preprocessor">#define REMMINA_RDP_FEATURE_UNFOCUS              3</span></div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#a01815b7e88a63d13125a313577fb5d44">   60</a></span>&#160;<span class="preprocessor">#define REMMINA_RDP_FEATURE_TOOL_SENDCTRLALTDEL  4</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#aea6bc951b2a6212e254de34f8663cfbb">   61</a></span>&#160;<span class="preprocessor">#define REMMINA_RDP_FEATURE_DYNRESUPDATE         5</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/* Some string settings of freerdp are preallocated buffers of N bytes */</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#a29cd7c35d086f36b5689225a4c24b3ea">   64</a></span>&#160;<span class="preprocessor">#define FREERDP_CLIENTHOSTNAME_LEN  32</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="../../d8/dc9/rdp__plugin_8h.html#a9493664f6bdafe3f5b593c3e5e1eacc7">   66</a></span>&#160;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html">RemminaPluginService</a>* <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a> = NULL;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> remmina_rdp_plugin_default_drive_name[]=<span class="stringliteral">&quot;RemminaDisk&quot;</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">static</span> BOOL rf_process_event_queue(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;rf_process_event_queue&quot;</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    UINT16 flags;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    rdpInput* input;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html">RemminaPluginRdpEvent</a>* event;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    DISPLAY_CONTROL_MONITOR_LAYOUT* dcml;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a5d119b1f108fe84c74e6484d48c2a565">event_queue</a> == NULL)</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    input = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>-&gt;input;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">while</span> ((event =(<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html">RemminaPluginRdpEvent</a>*) g_async_queue_try_pop(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a5d119b1f108fe84c74e6484d48c2a565">event_queue</a>)) != NULL)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">switch</span> (event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a84797e0cdf4484432740a8946325f126">type</a>)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7ae248ff32977c650df357c079f9d8b6e2">REMMINA_RDP_EVENT_TYPE_SCANCODE</a>:</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                flags = <span class="keyword">event</span>-&gt;key_event.extended ? KBD_FLAGS_EXTENDED : 0;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                flags |= <span class="keyword">event</span>-&gt;key_event.up ? KBD_FLAGS_RELEASE : KBD_FLAGS_DOWN;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                input-&gt;KeyboardEvent(input, flags, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a32ad1700995dbad58d5003b06692a5f2">key_event</a>.key_code);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7ab15f261f1918633711921198fea0029f">REMMINA_RDP_EVENT_TYPE_SCANCODE_UNICODE</a>:</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <span class="comment">/*</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">                 * TS_UNICODE_KEYBOARD_EVENT RDP message, see https://msdn.microsoft.com/en-us/library/cc240585.aspx</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                flags = <span class="keyword">event</span>-&gt;key_event.up ? KBD_FLAGS_RELEASE : KBD_FLAGS_DOWN;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                input-&gt;UnicodeKeyboardEvent(input, flags, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a32ad1700995dbad58d5003b06692a5f2">key_event</a>.unicode_code);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a8c8701fc5ef4ff1196c8d088dd146a5b">REMMINA_RDP_EVENT_TYPE_MOUSE</a>:</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">if</span> (event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">mouse_event</a>.extended)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    input-&gt;ExtendedMouseEvent(input, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">mouse_event</a>.flags,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                            event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">mouse_event</a>.x, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">mouse_event</a>.y);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    input-&gt;MouseEvent(input, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">mouse_event</a>.flags,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                            event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">mouse_event</a>.x, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">mouse_event</a>.y);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7aebb0df0651989a89f3f05e3c4894dd50">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_LIST</a>:</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="../../dc/db9/structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>-&gt;ClientFormatList(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="../../dc/db9/structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a663e2e70d2f51daa97666142fdde98d0">clipboard_formatlist</a>.pFormatList);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                free(event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a663e2e70d2f51daa97666142fdde98d0">clipboard_formatlist</a>.pFormatList);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a2e49b2022527a7f87ba0115e644d16d6">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_RESPONSE</a>:</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="../../dc/db9/structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>-&gt;ClientFormatDataResponse(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="../../dc/db9/structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a4ce27482e2571a90b222cbc9cb7f30f6">clipboard_formatdataresponse</a>.pFormatDataResponse);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordflow">if</span> (event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a4ce27482e2571a90b222cbc9cb7f30f6">clipboard_formatdataresponse</a>.pFormatDataResponse-&gt;requestedFormatData)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    free(event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a4ce27482e2571a90b222cbc9cb7f30f6">clipboard_formatdataresponse</a>.pFormatDataResponse-&gt;requestedFormatData);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                free(event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a4ce27482e2571a90b222cbc9cb7f30f6">clipboard_formatdataresponse</a>.pFormatDataResponse);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a899b766953e73fd8aa148a9d8f28434b">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_REQUEST</a>:</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="../../dc/db9/structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>-&gt;ClientFormatDataRequest(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a72d2a3d60347327237692947df93aea7">clipboard</a>.<a class="code" href="../../dc/db9/structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">context</a>, event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a20b531c3036273bb4f2de64ac33c9bf3">clipboard_formatdatarequest</a>.pFormatDataRequest);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                free(event-&gt;<a class="code" href="../../d0/d4c/structremmina__plugin__rdp__event.html#a20b531c3036273bb4f2de64ac33c9bf3">clipboard_formatdatarequest</a>.pFormatDataRequest);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a1973a1fe40811ab9a21bc77c23c42a05">REMMINA_RDP_EVENT_TYPE_SEND_MONITOR_LAYOUT</a>:</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                dcml = g_malloc0(<span class="keyword">sizeof</span>(DISPLAY_CONTROL_MONITOR_LAYOUT));</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">if</span> (dcml) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    dcml-&gt;Flags = DISPLAY_CONTROL_MONITOR_PRIMARY;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    dcml-&gt;Width = <span class="keyword">event</span>-&gt;monitor_layout.width;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    dcml-&gt;Height = <span class="keyword">event</span>-&gt;monitor_layout.height;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    dcml-&gt;Orientation = <span class="keyword">event</span>-&gt;monitor_layout.desktopOrientation;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    dcml-&gt;DesktopScaleFactor = <span class="keyword">event</span>-&gt;monitor_layout.desktopScaleFactor;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                    dcml-&gt;DeviceScaleFactor = <span class="keyword">event</span>-&gt;monitor_layout.deviceScaleFactor;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a660a5c5ea7256ab6a6486f3e831a9174">dispcontext</a>-&gt;SendMonitorLayout(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a660a5c5ea7256ab6a6486f3e831a9174">dispcontext</a>, 1, dcml);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                    g_free(dcml);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        g_free(event);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">static</span> gboolean remmina_rdp_tunnel_init(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_tunnel_init&quot;</span>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">/* Opens the optional SSH tunnel if needed.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">     * Used also when reopening the same tunnel for a freerdp reconnect.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">     * Returns TRUE if all OK, and setups correct rfi-&gt;Settings values</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">     * with connection and certificate parameters */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    gchar* hostport;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    gchar* s;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    gchar* host;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    gchar *cert_host;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    gint cert_port;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    gint port;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">const</span> gchar *cert_hostport;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d9/d49/types_8h.html#a112d7cc6c755209cabb68cf2a62ad515">RemminaFile</a>* remminafile;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    remminafile = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#afc324efae9664dbab7923f97cabff819">protocol_plugin_get_file</a>(gp);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    hostport = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a4187002c92c9792c1caf441941aa4cea">protocol_plugin_start_direct_tunnel</a>(gp, 3389, FALSE);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (hostport == NULL) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a3924f0bd0b9688d7f318e087d8cae278">get_server_port</a>(hostport, 3389, &amp;host, &amp;port);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    cert_host = host;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    cert_port = port;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;ssh_enabled&quot;</span>, FALSE)) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        cert_hostport = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;server&quot;</span>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">if</span> ( cert_hostport ) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a3924f0bd0b9688d7f318e087d8cae278">get_server_port</a>(cert_hostport, 3389, &amp;cert_host, &amp;cert_port);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (!rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a>) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="comment">/* settings-&gt;CertificateName and settings-&gt;ServerHostname is created</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">         * only on 1st connect, not on reconnections */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname = strdup(host);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> (cert_port == 3389)</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;CertificateName = strdup(cert_host);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            s = g_strdup_printf(<span class="stringliteral">&quot;%s:%d&quot;</span>, cert_host, cert_port);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;CertificateName = strdup(s);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            g_free(s);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (cert_host != host) g_free(cert_host);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    g_free(host);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    g_free(hostport);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerPort = port;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#a6dc42bd40842f63939e962828c19cfc7">  215</a></span>&#160;BOOL <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a6dc42bd40842f63939e962828c19cfc7">rf_auto_reconnect</a>(<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;{</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;rf_auto_reconnect&quot;</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    rdpSettings* settings = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>-&gt;settings;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    time_t treconn;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a> = TRUE;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aa0b949ab1e2f06b7d5efeccc924efaee">reconnect_maxattempts</a> = settings-&gt;AutoReconnectMaxRetries;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a4c35800dba8da687f7f56e3bb7a23413">reconnect_nattempt</a> = 0;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">/* Only auto reconnect on network disconnects. */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (freerdp_error_info(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>) != 0) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a> = FALSE;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (!settings-&gt;AutoReconnectionEnabled)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="comment">/* No auto-reconnect - just quit */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a> = FALSE;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">/* A network disconnect was detected and we should try to reconnect */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP][%s] network disconnection detected, initiating reconnection attempt\n&quot;</span>,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    ui = g_new0(<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072a5b2f8ce562cd1720b7a985f3a7c15ea7">REMMINA_RDP_UI_RECONNECT_PROGRESS</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="../../dc/dd7/rdp__event_8c.html#ae445fd0a84c7c9414a177a69c86cf325">remmina_rdp_event_queue_ui_async</a>(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>, ui);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">/* Sleep half a second to allow:</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">     *  - processing of the ui event we just pushed on the queue</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">     *  - better network conditions</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">     *  Remember: we hare on a thread, so the main gui won&#39;t lock */</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    usleep(500000);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">/* Perform an auto-reconnect. */</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">while</span> (TRUE)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">/* Quit retrying if max retries has been exceeded */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a4c35800dba8da687f7f56e3bb7a23413">reconnect_nattempt</a>++ &gt;= rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aa0b949ab1e2f06b7d5efeccc924efaee">reconnect_maxattempts</a>)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP][%s] maximum number of reconnection attempts exceeded.\n&quot;</span>,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">/* Attempt the next reconnect */</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP][%s] attempting reconnection, attempt #%d of %d\n&quot;</span>,</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname, rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a4c35800dba8da687f7f56e3bb7a23413">reconnect_nattempt</a>, rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aa0b949ab1e2f06b7d5efeccc924efaee">reconnect_maxattempts</a>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        ui = g_new0(<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072a5b2f8ce562cd1720b7a985f3a7c15ea7">REMMINA_RDP_UI_RECONNECT_PROGRESS</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="../../dc/dd7/rdp__event_8c.html#ae445fd0a84c7c9414a177a69c86cf325">remmina_rdp_event_queue_ui_async</a>(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>, ui);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        treconn = time(NULL);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">/* Reconnect the SSH tunnel, if needed */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span> (!remmina_rdp_tunnel_init(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>)) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP][%s] unable to recreate tunnel with remmina_rdp_tunnel_init.\n&quot;</span>,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">if</span> (freerdp_reconnect(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>))</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="comment">/* Reconnection is successful */</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP][%s] reconnection successful.\n&quot;</span>,</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a> = FALSE;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="comment">/* Wait until 5 secs have elapsed from last reconnect attempt */</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">while</span> (time(NULL) - treconn &lt; 5)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            sleep(1);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a> = FALSE;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#a2d4d5d48fa23ed0ae59466f5d3f1dacf">  299</a></span>&#160;BOOL <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a2d4d5d48fa23ed0ae59466f5d3f1dacf">rf_begin_paint</a>(rdpContext* context)</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;rf_begin_paint&quot;</span>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    rdpGdi* gdi = context-&gt;gdi;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    gdi-&gt;primary-&gt;hdc-&gt;hwnd-&gt;invalid-&gt;null = 1;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    gdi-&gt;primary-&gt;hdc-&gt;hwnd-&gt;ninvalid = 0;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#ab5b2b1181588e07e68c083c9539fa84f">  308</a></span>&#160;BOOL <a class="code" href="../../d5/db5/rdp__plugin_8c.html#ab5b2b1181588e07e68c083c9539fa84f">rf_end_paint</a>(rdpContext* context)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;rf_end_paint&quot;</span>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    INT32 x, y;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    UINT32 w, h;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    rdpGdi* gdi;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    gdi = context-&gt;gdi;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) context;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    gp = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (gdi-&gt;primary-&gt;hdc-&gt;hwnd-&gt;invalid-&gt;null)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    x = gdi-&gt;primary-&gt;hdc-&gt;hwnd-&gt;invalid-&gt;x;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    y = gdi-&gt;primary-&gt;hdc-&gt;hwnd-&gt;invalid-&gt;y;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    w = gdi-&gt;primary-&gt;hdc-&gt;hwnd-&gt;invalid-&gt;w;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    h = gdi-&gt;primary-&gt;hdc-&gt;hwnd-&gt;invalid-&gt;h;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    ui = g_new0(<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072a7b403ba500c63591854b0c2864f2f4bf">REMMINA_RDP_UI_UPDATE_REGION</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a347fb18e30f47ba1f1772f2a6b05cab9">region</a>.x = x;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a347fb18e30f47ba1f1772f2a6b05cab9">region</a>.y = y;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a347fb18e30f47ba1f1772f2a6b05cab9">region</a>.width = w;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a347fb18e30f47ba1f1772f2a6b05cab9">region</a>.height = h;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="../../dc/dd7/rdp__event_8c.html#ae445fd0a84c7c9414a177a69c86cf325">remmina_rdp_event_queue_ui_async</a>(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>, ui);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keyword">static</span> BOOL rf_desktop_resize(rdpContext* context)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;rf_desktop_resize&quot;</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) context;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    gp = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a0c45a9593d1fcc473a4796f9908ce4df">protocol_plugin_set_width</a>(gp, rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopWidth);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#acb1227bee519771afe166796037edfd2">protocol_plugin_set_height</a>(gp, rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopHeight);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">/* Call to remmina_rdp_event_update_scale(gp) on the main UI thread */</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    ui = g_new0(<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072aa5f6f338ffaa4bed53b225cf54b50000">REMMINA_RDP_UI_EVENT</a>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#abd7690614b813952f560e56dd333ec0d">event</a>.type = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a70cc17b1d3603d036f962a0ae8496b35a5bec41fd19576fc5c3e397366461dfe4">REMMINA_RDP_UI_EVENT_UPDATE_SCALE</a>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="../../dc/dd7/rdp__event_8c.html#ab5fe43c1b1b77c39f118d2581942eb81">remmina_rdp_event_queue_ui_sync_retint</a>(gp, ui);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a38a3db82b3e00863f07d2c553e90ce64">protocol_plugin_emit_signal</a>(gp, <span class="stringliteral">&quot;desktop-resize&quot;</span>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="keyword">static</span> BOOL remmina_rdp_pre_connect(freerdp* instance)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;{</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_pre_connect&quot;</span>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    ALIGN64 rdpSettings* settings;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) instance-&gt;context;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    settings = instance-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    gp = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    settings-&gt;OsMajorType = OSMAJORTYPE_UNIX;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    settings-&gt;OsMinorType = OSMINORTYPE_UNSPECIFIED;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    ZeroMemory(settings-&gt;OrderSupport, 32);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    settings-&gt;BitmapCacheEnabled = True;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    settings-&gt;OffscreenSupportLevel = True;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    settings-&gt;OrderSupport[NEG_DSTBLT_INDEX] = True;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    settings-&gt;OrderSupport[NEG_PATBLT_INDEX] = True;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    settings-&gt;OrderSupport[NEG_SCRBLT_INDEX] = True;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    settings-&gt;OrderSupport[NEG_OPAQUE_RECT_INDEX] = True;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    settings-&gt;OrderSupport[NEG_DRAWNINEGRID_INDEX] = False;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    settings-&gt;OrderSupport[NEG_MULTIDSTBLT_INDEX] = False;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    settings-&gt;OrderSupport[NEG_MULTIPATBLT_INDEX] = False;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    settings-&gt;OrderSupport[NEG_MULTISCRBLT_INDEX] = False;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    settings-&gt;OrderSupport[NEG_MULTIOPAQUERECT_INDEX] = True;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    settings-&gt;OrderSupport[NEG_MULTI_DRAWNINEGRID_INDEX] = False;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    settings-&gt;OrderSupport[NEG_LINETO_INDEX] = True;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    settings-&gt;OrderSupport[NEG_POLYLINE_INDEX] = True;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    settings-&gt;OrderSupport[NEG_MEMBLT_INDEX] = settings-&gt;BitmapCacheEnabled;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    settings-&gt;OrderSupport[NEG_MEM3BLT_INDEX] = settings-&gt;BitmapCacheEnabled;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    settings-&gt;OrderSupport[NEG_MEMBLT_V2_INDEX] = settings-&gt;BitmapCacheEnabled;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    settings-&gt;OrderSupport[NEG_MEM3BLT_V2_INDEX] = settings-&gt;BitmapCacheEnabled;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    settings-&gt;OrderSupport[NEG_SAVEBITMAP_INDEX] = False;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    settings-&gt;OrderSupport[NEG_GLYPH_INDEX_INDEX] = True;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    settings-&gt;OrderSupport[NEG_FAST_INDEX_INDEX] = True;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    settings-&gt;OrderSupport[NEG_FAST_GLYPH_INDEX] = True;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    settings-&gt;OrderSupport[NEG_POLYGON_SC_INDEX] = False;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    settings-&gt;OrderSupport[NEG_POLYGON_CB_INDEX] = False;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    settings-&gt;OrderSupport[NEG_ELLIPSE_SC_INDEX] = False;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    settings-&gt;OrderSupport[NEG_ELLIPSE_CB_INDEX] = False;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (settings-&gt;RemoteFxCodec == True)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        settings-&gt;FrameAcknowledge = False;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        settings-&gt;LargePointerFlag = True;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        settings-&gt;PerformanceFlags = PERF_FLAG_NONE;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a73a760b5eeaaf7d2a0684b1145d5d706">rfx_context</a> = rfx_context_new(FALSE);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    PubSub_SubscribeChannelConnected(instance-&gt;context-&gt;pubSub,</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        (pChannelConnectedEventHandler)<a class="code" href="../../d6/d97/rdp__channels_8c.html#ad702816cc7dd625f0518f58fc5405c12">remmina_rdp_OnChannelConnectedEventHandler</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    PubSub_SubscribeChannelDisconnected(instance-&gt;context-&gt;pubSub,</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        (pChannelDisconnectedEventHandler)<a class="code" href="../../d6/d97/rdp__channels_8c.html#a5850b939a52886321d6e4c3e5e62f97d">remmina_rdp_OnChannelDisconnectedEventHandler</a>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    freerdp_client_load_addins(instance-&gt;context-&gt;channels, instance-&gt;settings);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keyword">static</span> UINT32 rf_get_local_color_format(<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi, BOOL aligned)</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;{</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    UINT32 DstFormat;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    BOOL invert = aligned;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (!rfi)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a40e89e126e5dd96a3f67e6f945a8867b">bpp</a> == 32)</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        DstFormat = (!invert) ? PIXEL_FORMAT_RGBA32 : PIXEL_FORMAT_BGRA32;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a40e89e126e5dd96a3f67e6f945a8867b">bpp</a> == 24)</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span> (aligned)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            DstFormat = (!invert) ? PIXEL_FORMAT_RGBX32 : PIXEL_FORMAT_BGRX32;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            DstFormat = (!invert) ? PIXEL_FORMAT_RGB24 : PIXEL_FORMAT_BGR24;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a40e89e126e5dd96a3f67e6f945a8867b">bpp</a> == 16)</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            DstFormat = (!invert) ? PIXEL_FORMAT_RGB16 : PIXEL_FORMAT_BGR16;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a40e89e126e5dd96a3f67e6f945a8867b">bpp</a> == 15)</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            DstFormat = (!invert) ? PIXEL_FORMAT_RGB16 : PIXEL_FORMAT_BGR16;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            DstFormat = (!invert) ? PIXEL_FORMAT_RGBX32 : PIXEL_FORMAT_BGRX32;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> DstFormat;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="keyword">static</span> BOOL remmina_rdp_post_connect(freerdp* instance)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;{</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_post_connect&quot;</span>);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    rdpGdi* gdi;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordtype">int</span> hdcBytesPerPixel, hdcBitsPerPixel;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) instance-&gt;context;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    gp = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a8d33f3d947352ef93dd000c28d601446">width</a> = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopWidth;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a7dd82061ce0740b32b1fbd72c019aa9a">height</a> = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopHeight;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a9d28c775fe1ee90ad48941d753564a76">srcBpp</a> = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ColorDepth;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    if (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RemoteFxCodec == FALSE)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a91f20005b39ad9e1073cf25bf6d7c2f2">sw_gdi</a> = TRUE;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="../../dd/d24/rdp__graphics_8c.html#a95732c40c35499f3440715b6526279b1">rf_register_graphics</a>(instance-&gt;context-&gt;graphics);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a40e89e126e5dd96a3f67e6f945a8867b">bpp</a> == 32)</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        hdcBytesPerPixel = 4;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        hdcBitsPerPixel = 32;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aa13bb4f72f3024d81e9051de4bd65ec0">cairo_format</a> = CAIRO_FORMAT_ARGB32;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a40e89e126e5dd96a3f67e6f945a8867b">bpp</a> == 24)</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        hdcBytesPerPixel = 4;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        hdcBitsPerPixel = 32;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aa13bb4f72f3024d81e9051de4bd65ec0">cairo_format</a> = CAIRO_FORMAT_RGB24;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        hdcBytesPerPixel = 2;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        hdcBitsPerPixel = 16;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aa13bb4f72f3024d81e9051de4bd65ec0">cairo_format</a> = CAIRO_FORMAT_RGB16_565;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    gdi_init(instance, rf_get_local_color_format(rfi, TRUE));</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    gdi = instance-&gt;context-&gt;gdi;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a79e13a95cf9b00ae1980da5bdda7132e">primary_buffer</a> = gdi-&gt;primary_buffer;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/*  rfi-&gt;hdc = gdi_GetDC();</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;bitsPerPixel = hdcBitsPerPixel;</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;bytesPerPixel = hdcBytesPerPixel;</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;hwnd = (HGDI_WND) malloc(sizeof(GDI_WND));</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;hwnd-&gt;invalid = gdi_CreateRectRgn(0, 0, 0, 0);</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;hwnd-&gt;invalid-&gt;null = 1;</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;hwnd-&gt;count = 32;</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;hwnd-&gt;cinvalid = (HGDI_RGN) malloc(sizeof(GDI_RGN) * rfi-&gt;hdc-&gt;hwnd-&gt;count);</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">    rfi-&gt;hdc-&gt;hwnd-&gt;ninvalid = 0;</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    pointer_cache_register_callbacks(instance-&gt;update);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    instance-&gt;update-&gt;BeginPaint = <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a2d4d5d48fa23ed0ae59466f5d3f1dacf">rf_begin_paint</a>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    instance-&gt;update-&gt;EndPaint = <a class="code" href="../../d5/db5/rdp__plugin_8c.html#ab5b2b1181588e07e68c083c9539fa84f">rf_end_paint</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    instance-&gt;update-&gt;DesktopResize = rf_desktop_resize;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="../../d3/db3/rdp__cliprdr_8c.html#ac3300142e3c2f416896948681ecd45f3">remmina_rdp_clipboard_init</a>(rfi);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3c2ffa55ba97bc70324d61b8cc838e73">connected</a> = True;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    ui = g_new0(<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ad3ced07ddeda0100b59ca9c8af47bbe9">REMMINA_RDP_UI_CONNECTED</a>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="../../dc/dd7/rdp__event_8c.html#ae445fd0a84c7c9414a177a69c86cf325">remmina_rdp_event_queue_ui_async</a>(gp, ui);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keyword">static</span> BOOL remmina_rdp_authenticate(freerdp* instance, <span class="keywordtype">char</span>** username, <span class="keywordtype">char</span>** password, <span class="keywordtype">char</span>** domain)</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;{</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_authenticate&quot;</span>);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    gchar *s_username, *s_password, *s_domain;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    gint ret;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    gboolean save;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    gboolean disablepasswordstoring;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="../../d9/d49/types_8h.html#a112d7cc6c755209cabb68cf2a62ad515">RemminaFile</a>* remminafile;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) instance-&gt;context;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    gp = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    remminafile = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#afc324efae9664dbab7923f97cabff819">protocol_plugin_get_file</a>(gp);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    disablepasswordstoring = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;disablepasswordstoring&quot;</span>, FALSE);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    ret = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a5ed74d9a9a0469dd016f82f971b4d0fa">protocol_plugin_init_authuserpwd</a>(gp, TRUE, !disablepasswordstoring);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (ret == GTK_RESPONSE_OK)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        s_username = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#ac424fd51b5a7b6f74b20b21631e5ade1">protocol_plugin_init_get_username</a>(gp);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> (s_username) rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Username = strdup(s_username);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        s_password = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a9e0b20ac013464c4c2ab42085961df7d">protocol_plugin_init_get_password</a>(gp);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> (s_password) rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Password = strdup(s_password);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        s_domain = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a7d788b6496a65d226039c3a2c176554c">protocol_plugin_init_get_domain</a>(gp);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">if</span> (s_domain) rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Domain = strdup(s_domain);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        save = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a1b9efdf8e453bf4b14c82e1ee1645050">protocol_plugin_init_get_savepassword</a>(gp);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">if</span> (save)</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="comment">// User has requested to save credentials. We put all the new cretentials</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="comment">// into remminafile-&gt;settings. They will be saved later, on successful connection, by</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="comment">// remmina_connection_window.c</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#aad0e82f9220478fa43dfa595dd1086e5">file_set_string</a>( remminafile, <span class="stringliteral">&quot;username&quot;</span>, s_username );</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#aad0e82f9220478fa43dfa595dd1086e5">file_set_string</a>( remminafile, <span class="stringliteral">&quot;password&quot;</span>, s_password );</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#aad0e82f9220478fa43dfa595dd1086e5">file_set_string</a>( remminafile, <span class="stringliteral">&quot;domain&quot;</span>, s_domain );</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span> ( s_username ) g_free( s_username );</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">if</span> ( s_password ) g_free( s_password );</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">if</span> ( s_domain ) g_free( s_domain );</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#acacad775c2c168f900deaa6c90481319">user_cancelled</a> = TRUE;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">return</span> False;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="keyword">static</span> DWORD remmina_rdp_verify_certificate(freerdp* instance, <span class="keyword">const</span> <span class="keywordtype">char</span> *common_name, <span class="keyword">const</span> <span class="keywordtype">char</span>* subject,</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* issuer, <span class="keyword">const</span> <span class="keywordtype">char</span>* fingerprint, BOOL host_mismatch)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;{</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_verify_certificate&quot;</span>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    gint status;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) instance-&gt;context;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    gp = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    status = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a35129ddf407583351c1bb914e9141cbd">protocol_plugin_init_certificate</a>(gp, subject, issuer, fingerprint);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">if</span> (status == GTK_RESPONSE_OK)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keyword">static</span> DWORD remmina_rdp_verify_changed_certificate(freerdp* instance,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* common_name, <span class="keyword">const</span> <span class="keywordtype">char</span>* subject, <span class="keyword">const</span> <span class="keywordtype">char</span>* issuer,</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* new_fingerprint, <span class="keyword">const</span> <span class="keywordtype">char</span>* old_subject, <span class="keyword">const</span> <span class="keywordtype">char</span>* old_issuer, <span class="keyword">const</span> <span class="keywordtype">char</span>* old_fingerprint)</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;{</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_verify_changed_certificate&quot;</span>);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    gint status;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) instance-&gt;context;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    gp = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    status = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a32b18041abaf6ac3cbae2a37f3aa1e70">protocol_plugin_changed_certificate</a>(gp, subject, issuer, new_fingerprint, old_fingerprint);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">if</span> (status == GTK_RESPONSE_OK)</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">return</span> True;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> remmina_rdp_receive_channel_data(freerdp* instance, <span class="keywordtype">int</span> channelId, UINT8* data, <span class="keywordtype">int</span> size, <span class="keywordtype">int</span> flags, <span class="keywordtype">int</span> total_size)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;{</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_receive_channel_data&quot;</span>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">return</span> freerdp_channels_data(instance, channelId, data, size, flags, total_size);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> remmina_rdp_main_loop(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;{</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_main_loop&quot;</span>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    DWORD nCount;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    DWORD status;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    HANDLE handles[64];</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    gchar buf[100];</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">while</span> (!freerdp_shall_disconnect(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>))</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        nCount = freerdp_get_event_handles(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>-&gt;context, &amp;handles[0], 64);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a522c742a333cf0603dfa7d06a7376669">event_handle</a>)</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            handles[nCount++] = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a522c742a333cf0603dfa7d06a7376669">event_handle</a>;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">if</span> (nCount == 0)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;freerdp_get_event_handles failed\n&quot;</span>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        status = WaitForMultipleObjects(nCount, handles, FALSE, 100);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">if</span> (status == WAIT_FAILED)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;WaitForMultipleObjects failed with %lu\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)status);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a522c742a333cf0603dfa7d06a7376669">event_handle</a> &amp;&amp; WaitForSingleObject(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a522c742a333cf0603dfa7d06a7376669">event_handle</a>, 0) == WAIT_OBJECT_0) {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="keywordflow">if</span> (!rf_process_event_queue(gp))</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;Failed to process local kb/mouse event queue\n&quot;</span>);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordflow">if</span> (read(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a539feef609228a91c5e54d5da837bb7a">event_pipe</a>[0], buf, sizeof (buf)))</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">if</span> (!freerdp_check_event_handles(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>-&gt;context))</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/db5/rdp__plugin_8c.html#a6dc42bd40842f63939e962828c19cfc7">rf_auto_reconnect</a>(rfi)) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="comment">/* Reset the possible reason/error which made us doing many reconnection reattempts and continue */</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, NULL);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Failed to check FreeRDP event handles\n&quot;</span>);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;}</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#aaa5eb17481ba534c9f334d2a61a68ab2">  687</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/db5/rdp__plugin_8c.html#aaa5eb17481ba534c9f334d2a61a68ab2">remmina_rdp_load_static_channel_addin</a>(rdpChannels* channels, rdpSettings* settings, <span class="keywordtype">char</span>* name, <span class="keywordtype">void</span>* data)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_load_static_channel_addin&quot;</span>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordtype">void</span>* entry;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    entry = freerdp_load_channel_addin_entry(name, NULL, NULL, FREERDP_ADDIN_CHANNEL_STATIC);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> (entry)</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span> (freerdp_channels_client_load(channels, settings, entry, data) == 0)</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;loading channel %s\n&quot;</span>, name);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">/* Send CTRL+ALT+DEL keys keystrokes to the plugin drawing_area widget */</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> remmina_rdp_send_ctrlaltdel(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a> *gp)</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;{</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_send_ctrlaltdel&quot;</span>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    guint keys[] = { GDK_KEY_Control_L, GDK_KEY_Alt_L, GDK_KEY_Delete };</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a6944e4b47485a470ad2672d225ccd9ac">protocol_plugin_send_keys_signals</a>(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>,</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        keys, G_N_ELEMENTS(keys), GDK_KEY_PRESS | GDK_KEY_RELEASE);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="keyword">static</span> gboolean remmina_rdp_main(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;{</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_main&quot;</span>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keyword">const</span> gchar* s;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    gchar *sm;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    gchar* value;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    gint rdpsnd_rate;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    gint rdpsnd_channel;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">char</span> *rdpsnd_params[3];</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordtype">int</span> rdpsnd_nparams;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordtype">char</span> rdpsnd_param1[16];</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordtype">char</span> rdpsnd_param2[16];</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keyword">const</span> gchar* cs;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="../../d9/d49/types_8h.html#a112d7cc6c755209cabb68cf2a62ad515">RemminaFile</a>* remminafile;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    gchar *gateway_host;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    gint gateway_port;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    gint desktopOrientation, desktopScaleFactor, deviceScaleFactor;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    gint dynresw, dynresh;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    remminafile = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#afc324efae9664dbab7923f97cabff819">protocol_plugin_get_file</a>(gp);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span> (!remmina_rdp_tunnel_init(gp))</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;AutoReconnectionEnabled = ( remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;disableautoreconnect&quot;</span>, FALSE) ? FALSE : TRUE );</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">/* Disable RDP auto reconnection when ssh tunnel is enabled */</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;ssh_enabled&quot;</span>, FALSE)) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;AutoReconnectionEnabled = FALSE;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ColorDepth = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;colordepth&quot;</span>, 0);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ColorDepth == 0)</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RemoteFxCodec = True;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ColorDepth = 32;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopWidth = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;resolution_width&quot;</span>, 1024);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopHeight = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;resolution_height&quot;</span>, 768);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    dynresw = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;dynamic_resolution_width&quot;</span>, 0);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    dynresh = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;dynamic_resolution_height&quot;</span>, 0);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a96c4689f6bc062482536038cb3b24e78">scale</a> == <a class="code" href="../../d9/d49/types_8h.html#aeea5ee1e675368413b6f6ab09883e7dea4d22c6eed721b661d618098159a20946">REMMINA_PROTOCOL_WIDGET_SCALE_MODE_DYNRES</a> &amp;&amp; dynresh != 0 &amp;&amp; dynresw != 0) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopWidth = dynresw;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopHeight = dynresh;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a0c45a9593d1fcc473a4796f9908ce4df">protocol_plugin_set_width</a>(gp, rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopWidth);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#acb1227bee519771afe166796037edfd2">protocol_plugin_set_height</a>(gp, rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopHeight);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;username&quot;</span>))</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Username = strdup(remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;username&quot;</span>));</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;domain&quot;</span>))</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Domain = strdup(remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;domain&quot;</span>));</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    s = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;password&quot;</span>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (s)</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Password = strdup(s);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;AutoLogonEnabled = 1;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">/* Remote Desktop Gateway server address */</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayEnabled = FALSE;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    s = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;gateway_server&quot;</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span> (s)</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a3924f0bd0b9688d7f318e087d8cae278">get_server_port</a>(s, 443, &amp;gateway_host, &amp;gateway_port);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayHostname = gateway_host;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayPort = gateway_port;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayEnabled = TRUE;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUseSameCredentials = TRUE;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="comment">/* Remote Desktop Gateway domain */</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;gateway_domain&quot;</span>))</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayDomain = strdup(remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;gateway_domain&quot;</span>));</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUseSameCredentials = FALSE;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="comment">/* Remote Desktop Gateway username */</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;gateway_username&quot;</span>))</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUsername = strdup(remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;gateway_username&quot;</span>));</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUseSameCredentials = FALSE;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="comment">/* Remote Desktop Gateway password */</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    s = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;gateway_password&quot;</span>);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span>(s)</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayPassword = strdup(s);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUseSameCredentials = FALSE;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">/* If no different credentials were provided for the Remote Desktop Gateway</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">     * use the same authentication credentials for the host */</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayEnabled &amp;&amp; rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUseSameCredentials)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        g_free(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayDomain);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayDomain = g_strdup(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Domain);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        g_free(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUsername);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayUsername = g_strdup(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Username);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        g_free(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayPassword);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayPassword = g_strdup(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;Password);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="comment">/* Remote Desktop Gateway usage */</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;GatewayEnabled)</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        freerdp_set_gateway_usage_method(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>,</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;gateway_usage&quot;</span>, FALSE) ? TSC_PROXY_MODE_DETECT : TSC_PROXY_MODE_DIRECT);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">/* Certificate ignore */</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;IgnoreCertificate = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;cert_ignore&quot;</span>, 0);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">/* ClientHostname is internally preallocated to 32 bytes by libfreerdp */</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> ((cs=remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;clientname&quot;</span>)))</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        strncpy(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ClientHostname, cs, <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a29cd7c35d086f36b5689225a4c24b3ea">FREERDP_CLIENTHOSTNAME_LEN</a>-1);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        strncpy(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ClientHostname, g_get_host_name(), <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a29cd7c35d086f36b5689225a4c24b3ea">FREERDP_CLIENTHOSTNAME_LEN</a>-1);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ClientHostname[<a class="code" href="../../d5/db5/rdp__plugin_8c.html#a29cd7c35d086f36b5689225a4c24b3ea">FREERDP_CLIENTHOSTNAME_LEN</a>-1]=0;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;loadbalanceinfo&quot;</span>))</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;LoadBalanceInfo = (BYTE*) strdup(remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;loadbalanceinfo&quot;</span>));</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;LoadBalanceInfoLength = (UINT32) strlen((<span class="keywordtype">char</span> *) rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;LoadBalanceInfo);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;exec&quot;</span>))</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;AlternateShell = strdup(remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;exec&quot;</span>));</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;execpath&quot;</span>))</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ShellWorkingDirectory = strdup(remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;execpath&quot;</span>));</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    sm = g_strdup_printf(<span class="stringliteral">&quot;rdp_quality_%i&quot;</span>, remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;quality&quot;</span>, <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#afe2d7714782068b3db60f578fb6cec79">DEFAULT_QUALITY_0</a>));</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    value = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a9716956dfd351175bde8181d92ad68f9">pref_get_value</a>(sm);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    g_free(sm);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">if</span> (value &amp;&amp; value[0])</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;PerformanceFlags = strtoul(value, NULL, 16);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">switch</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;quality&quot;</span>, <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#afe2d7714782068b3db60f578fb6cec79">DEFAULT_QUALITY_0</a>))</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordflow">case</span> 9:</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;PerformanceFlags = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a72890e2ce928a8ad6efbab20e7287633">DEFAULT_QUALITY_9</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;PerformanceFlags = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a862d431b370e09c3a79463440a2864f0">DEFAULT_QUALITY_2</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;PerformanceFlags = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a48b04df4f9d67b0412a9a5583127725b">DEFAULT_QUALITY_1</a>;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;PerformanceFlags = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#afe2d7714782068b3db60f578fb6cec79">DEFAULT_QUALITY_0</a>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    g_free(value);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">/* PerformanceFlags bitmask need also to be splitted into BOOL variables</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">     * like rfi-&gt;settings-&gt;DisableWallpaper, rfi-&gt;settings-&gt;AllowFontSmoothing...</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">     * or freerdp_get_param_bool() function will return the wrong value</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    freerdp_performance_flags_split(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;KeyboardLayout = <a class="code" href="../../d3/dc2/rdp__settings_8c.html#a4052ab6359b14e8f9a4cf76bed4da90c">remmina_rdp_settings_get_keyboard_layout</a>();</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;console&quot;</span>, FALSE))</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ConsoleSession = True;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    cs = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;security&quot;</span>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(cs, <span class="stringliteral">&quot;rdp&quot;</span>) == 0)</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RdpSecurity = True;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;TlsSecurity = False;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;NlaSecurity = False;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ExtSecurity = False;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;UseRdpSecurityLayer = True;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (g_strcmp0(cs, <span class="stringliteral">&quot;tls&quot;</span>) == 0)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RdpSecurity = False;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;TlsSecurity = True;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;NlaSecurity = False;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ExtSecurity = False;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (g_strcmp0(cs, <span class="stringliteral">&quot;nla&quot;</span>) == 0)</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RdpSecurity = False;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;TlsSecurity = False;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;NlaSecurity = True;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ExtSecurity = False;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">/* This is &quot;-nego&quot; switch of xfreerdp */</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;NegotiateSecurityLayer = True;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;CompressionEnabled = True;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;FastPathInput = True;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;FastPathOutput = True;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">/* Orientation and scaling settings */</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="../../d3/dc2/rdp__settings_8c.html#a5f05047cf10611ffb7a23a248650cb4c">remmina_rdp_settings_get_orientation_scale_prefs</a>(&amp;desktopOrientation, &amp;desktopScaleFactor, &amp;deviceScaleFactor);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopOrientation = desktopOrientation;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (desktopScaleFactor != 0 &amp;&amp; deviceScaleFactor != 0)</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DesktopScaleFactor = desktopScaleFactor;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DeviceScaleFactor = deviceScaleFactor;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">/* Try to enable &quot;Display Control Virtual Channel Extension&quot;, needed to</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">     * dynamically resize remote desktop. This will automatically open</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">     * the &quot;disp&quot; dynamic channel, if available */</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;SupportDisplayControl = TRUE;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    cs = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;sound&quot;</span>);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span> (g_strcmp0(cs, <span class="stringliteral">&quot;remote&quot;</span>) == 0)</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RemoteConsoleAudio = 1;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (g_str_has_prefix(cs, <span class="stringliteral">&quot;local&quot;</span>))</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        rdpsnd_nparams = 0;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        rdpsnd_params[rdpsnd_nparams++] = <span class="stringliteral">&quot;rdpsnd&quot;</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        cs = strchr(cs, <span class="charliteral">&#39;,&#39;</span>);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="keywordflow">if</span> (cs)</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            rdpsnd_rate = atoi(cs + 1);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <span class="keywordflow">if</span> (rdpsnd_rate &gt; 1000 &amp;&amp; rdpsnd_rate &lt; 150000)</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                snprintf( rdpsnd_param1, <span class="keyword">sizeof</span>(rdpsnd_param1), <span class="stringliteral">&quot;rate:%d&quot;</span>, rdpsnd_rate );</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                rdpsnd_params[rdpsnd_nparams++] = rdpsnd_param1;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                cs = strchr(cs +1, <span class="charliteral">&#39;,&#39;</span>);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                <span class="keywordflow">if</span> (cs)</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                    rdpsnd_channel = atoi(cs + 1);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                    <span class="keywordflow">if</span> (rdpsnd_channel &gt;= 1 &amp;&amp; rdpsnd_channel &lt;= 2)</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                    {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                        snprintf( rdpsnd_param2, <span class="keyword">sizeof</span>(rdpsnd_param2), <span class="stringliteral">&quot;channel:%d&quot;</span>, rdpsnd_channel );</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        rdpsnd_params[rdpsnd_nparams++] = rdpsnd_param2;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                    }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                }</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        freerdp_client_add_static_channel(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>, rdpsnd_nparams, (<span class="keywordtype">char</span>**) rdpsnd_params);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    }</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">if</span> ( remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;microphone&quot;</span>, FALSE) ? TRUE : FALSE )</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordtype">char</span>* p[1];</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        count = 1;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        p[0] = <span class="stringliteral">&quot;audin&quot;</span>;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        freerdp_client_add_dynamic_channel(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>, count, p);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RedirectClipboard = ( remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;disableclipboard&quot;</span>, FALSE) ? FALSE: TRUE );</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    cs = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">file_get_string</a>(remminafile, <span class="stringliteral">&quot;sharefolder&quot;</span>);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">if</span> (cs &amp;&amp; cs[0] == <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        RDPDR_DRIVE* drive;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        gsize sz;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        drive = (RDPDR_DRIVE*) malloc(<span class="keyword">sizeof</span>(RDPDR_DRIVE));</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        ZeroMemory(drive, <span class="keyword">sizeof</span>(RDPDR_DRIVE));</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        s = strrchr( cs, <span class="charliteral">&#39;/&#39;</span> );</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keywordflow">if</span> ( s == NULL || s[1] == 0 )</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            s = remmina_rdp_plugin_default_drive_name;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            s++;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        sm = g_convert_with_fallback(s, -1, <span class="stringliteral">&quot;ascii&quot;</span>, <span class="stringliteral">&quot;utf-8&quot;</span>, <span class="stringliteral">&quot;_&quot;</span>, NULL, &amp;sz, NULL);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        drive-&gt;Type = RDPDR_DTYP_FILESYSTEM;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        drive-&gt;Name = _strdup(sm);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        drive-&gt;Path = _strdup(cs);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        g_free(sm);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        freerdp_device_collection_add(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>, (RDPDR_DEVICE*) drive);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DeviceRedirection = TRUE;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;shareprinter&quot;</span>, FALSE))</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        RDPDR_PRINTER* printer;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        printer = (RDPDR_PRINTER*) malloc(<span class="keyword">sizeof</span>(RDPDR_PRINTER));</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        ZeroMemory(printer, <span class="keyword">sizeof</span>(RDPDR_PRINTER));</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        printer-&gt;Type = RDPDR_DTYP_PRINT;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DeviceRedirection = TRUE;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RedirectPrinters = TRUE;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        freerdp_device_collection_add(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>, (RDPDR_DEVICE*) printer);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">file_get_int</a>(remminafile, <span class="stringliteral">&quot;sharesmartcard&quot;</span>, FALSE))</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        RDPDR_SMARTCARD* smartcard;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        smartcard = (RDPDR_SMARTCARD*) malloc(<span class="keyword">sizeof</span>(RDPDR_SMARTCARD));</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        ZeroMemory(smartcard, <span class="keyword">sizeof</span>(RDPDR_SMARTCARD));</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        smartcard-&gt;Type = RDPDR_DTYP_SMARTCARD;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        smartcard-&gt;Name = _strdup(<span class="stringliteral">&quot;scard&quot;</span>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;DeviceRedirection = TRUE;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;RedirectSmartCards = TRUE;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        freerdp_device_collection_add(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>, (RDPDR_DEVICE*) smartcard);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (!freerdp_connect(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>))</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keywordflow">if</span> (!rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#acacad775c2c168f900deaa6c90481319">user_cancelled</a>)</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            UINT32 e;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            e = freerdp_get_last_error(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>-&gt;context);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">switch</span>(e) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                <span class="keywordflow">case</span> FREERDP_ERROR_AUTHENTICATION_FAILED:</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="keywordflow">case</span> STATUS_LOGON_FAILURE:  <span class="comment">// wrong return code from FreeRDP introduced at the end of July 2016 ?</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Authentication to RDP server %s failed.\nCheck username, password and domain.&quot;</span>),</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                    <span class="comment">// Invalidate the saved password, so the user will be re-asked at next logon</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a8281727d61c39f8f4e03c9f907844f83">file_unsave_password</a>(remminafile);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                <span class="keywordflow">case</span> STATUS_ACCOUNT_LOCKED_OUT:</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Access to RDP server %s failed.\nAccount is locked out.&quot;</span>),</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                <span class="keywordflow">case</span> STATUS_ACCOUNT_EXPIRED:</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Access to RDP server %s failed.\nAccount is expired.&quot;</span>),</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                <span class="keywordflow">case</span> STATUS_PASSWORD_EXPIRED:</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Access to RDP server %s failed.\nPassword expired.&quot;</span>),</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                <span class="keywordflow">case</span> STATUS_ACCOUNT_DISABLED:</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Access to RDP server %s failed.\nAccount is disabled.&quot;</span>),</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                <span class="keywordflow">case</span> STATUS_ACCOUNT_RESTRICTION:</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Access to RDP server %s failed.\nAccount has restrictions.&quot;</span>),</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                <span class="keywordflow">case</span> FREERDP_ERROR_CONNECT_FAILED:</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Connection to RDP server %s failed.&quot;</span>), rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <span class="keywordflow">case</span> FREERDP_ERROR_DNS_NAME_NOT_FOUND:</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Unable to find the address of RDP server %s.&quot;</span>), rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname );</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, _(<span class="stringliteral">&quot;Unable to connect to RDP server %s&quot;</span>), rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    remmina_rdp_main_loop(gp);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;}</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="keyword">static</span> gpointer remmina_rdp_main_thread(gpointer data)</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;{</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_main_thread&quot;</span>);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="../../d1/d53/remmina__public_8h.html#a0217e3fd8e00ca76249f6879117c31ff">CANCEL_ASYNC</a></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    gp = (<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>*) data;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    remmina_rdp_main(gp);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">thread</a> = 0;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">/* Signal main thread that we closed the connection. But wait 200ms, because we may</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">     * have outstaiding events to process in the meanwhile */</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    g_timeout_add(200, ((GSourceFunc) remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a7576806bc3115195d6598db4271d7b6b">protocol_plugin_close_connection</a>), gp);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;}</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> remmina_rdp_init(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;{</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_init&quot;</span>);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    freerdp* instance;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    instance = freerdp_new();</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    instance-&gt;PreConnect = remmina_rdp_pre_connect;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    instance-&gt;PostConnect = remmina_rdp_post_connect;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    instance-&gt;Authenticate = remmina_rdp_authenticate;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    instance-&gt;VerifyCertificate = remmina_rdp_verify_certificate;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    instance-&gt;VerifyChangedCertificate = remmina_rdp_verify_changed_certificate;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    instance-&gt;ContextSize = <span class="keyword">sizeof</span>(<a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a0e50aeabb34e9e653933d081e74c5c16">rfContext</a>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    freerdp_context_new(instance);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    rfi = (<a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>*) instance-&gt;context;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    g_object_set_data_full(G_OBJECT(gp), <span class="stringliteral">&quot;plugin-data&quot;</span>, rfi, free);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">protocol_widget</a> = gp;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a> = instance;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a> = instance-&gt;settings;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3c2ffa55ba97bc70324d61b8cc838e73">connected</a> = False;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">is_reconnecting</a> = False;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    freerdp_register_addin_provider(freerdp_channels_load_static_addin_entry, 0);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="../../dc/dd7/rdp__event_8c.html#af3a991a02d35fb09c85f2e752a5393ca">remmina_rdp_event_init</a>(gp);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="keyword">static</span> gboolean remmina_rdp_open_connection(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;{</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_open_connection&quot;</span>);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a96c4689f6bc062482536038cb3b24e78">scale</a> = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#ac676fc7d8e4d97ec582c2062841afb7b">remmina_protocol_widget_get_current_scale_mode</a>(gp);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">if</span> (pthread_create(&amp;rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">thread</a>, NULL, remmina_rdp_main_thread, gp))</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            <span class="stringliteral">&quot;Failed to initialize pthread. Falling back to non-thread mode...&quot;</span>);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">thread</a> = 0;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;}</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="keyword">static</span> gboolean remmina_rdp_close_connection(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp)</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;{</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_close_connection&quot;</span>);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    freerdp* instance;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>* ui;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">if</span> (freerdp_get_last_error(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>-&gt;context) == 0x10005)</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    {</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">protocol_plugin_set_error</a>(gp, <span class="stringliteral">&quot;Another user connected to the server (%s), forcing the disconnection of the current connection.&quot;</span>, rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">settings</a>-&gt;ServerHostname);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    }</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    instance = rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">instance</a>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">thread</a>)</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aa574515edb4966117f539d26e26f0a62">thread_cancelled</a> = TRUE;   <span class="comment">// Avoid all rf_queue function to run</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        pthread_cancel(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">thread</a>);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">thread</a>)</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            pthread_join(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">thread</a>, NULL);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">/* Cleanup clipboard: we cannot leave clipboard requesting data to this</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">     * connection */</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    ui = g_new0(<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">RemminaPluginRdpUiObject</a>, 1);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">type</a> = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f">REMMINA_RDP_UI_CLIPBOARD</a>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    ui-&gt;<a class="code" href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">clipboard</a>.type = <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a7e7b3ee1f3eef5387c1d3f315cff3f01">REMMINA_RDP_UI_CLIPBOARD_DETACH_OWNER</a>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <a class="code" href="../../dc/dd7/rdp__event_8c.html#ab5fe43c1b1b77c39f118d2581942eb81">remmina_rdp_event_queue_ui_sync_retint</a>(gp, ui);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (instance)</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">if</span> ( rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3c2ffa55ba97bc70324d61b8cc838e73">connected</a> ) {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            freerdp_disconnect(instance);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a3c2ffa55ba97bc70324d61b8cc838e73">connected</a> = False;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aec5322e26b76a0411e1f93f8e945b762">hdc</a>) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        gdi_DeleteDC(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aec5322e26b76a0411e1f93f8e945b762">hdc</a>);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#aec5322e26b76a0411e1f93f8e945b762">hdc</a> = NULL;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="../../d3/db3/rdp__cliprdr_8c.html#a4da95b96bf2c86b8f4cc63dcafdd1365">remmina_rdp_clipboard_free</a>(rfi);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> (rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a73a760b5eeaaf7d2a0684b1145d5d706">rfx_context</a>)</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        rfx_context_free(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a73a760b5eeaaf7d2a0684b1145d5d706">rfx_context</a>);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a73a760b5eeaaf7d2a0684b1145d5d706">rfx_context</a> = NULL;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    }</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (instance)</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    {</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        gdi_free(instance);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        cache_free(instance-&gt;context-&gt;cache);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        instance-&gt;context-&gt;cache = NULL;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">/* Destroy event queue. Pending async events will be discarded. Should we flush it ? */</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <a class="code" href="../../dc/dd7/rdp__event_8c.html#a65eef99dc99f77be815a5da804ed94fc">remmina_rdp_event_uninit</a>(gp);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">if</span> (instance) {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        freerdp_context_free(instance); <span class="comment">/* context is rfContext* rfi */</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        freerdp_free(instance); <span class="comment">/* This implicitly frees instance-&gt;context and rfi is no longer valid */</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">/* Remove instance-&gt;context from gp object data to avoid double free */</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    g_object_steal_data(G_OBJECT(gp), <span class="stringliteral">&quot;plugin-data&quot;</span>);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">/* Now let remmina to complete its disconnection tasks */</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a38a3db82b3e00863f07d2c553e90ce64">protocol_plugin_emit_signal</a>(gp, <span class="stringliteral">&quot;disconnect&quot;</span>);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="keyword">static</span> gboolean remmina_rdp_query_feature(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <span class="keyword">const</span> <a class="code" href="../../dc/de3/struct___remmina_protocol_feature.html">RemminaProtocolFeature</a>* feature)</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;{</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_query_feature&quot;</span>);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;}</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> remmina_rdp_call_feature(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a>* gp, <span class="keyword">const</span> <a class="code" href="../../dc/de3/struct___remmina_protocol_feature.html">RemminaProtocolFeature</a>* feature)</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;{</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_call_feature&quot;</span>);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="../../d9/d49/types_8h.html#a112d7cc6c755209cabb68cf2a62ad515">RemminaFile</a>* remminafile;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    remminafile = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#afc324efae9664dbab7923f97cabff819">protocol_plugin_get_file</a>(gp);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">switch</span> (feature-&gt;<a class="code" href="../../dc/de3/struct___remmina_protocol_feature.html#a36b55faeba78528ac9708dfa66667e20">id</a>)</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/db5/rdp__plugin_8c.html#ae92439cbe502ccd966ff82177b38f576">REMMINA_RDP_FEATURE_UNFOCUS</a>:</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            <a class="code" href="../../dc/dd7/rdp__event_8c.html#a4da10c12b28edc28403766994d6ef29c">remmina_rdp_event_unfocus</a>(gp);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/db5/rdp__plugin_8c.html#aa0f211a8cbe456889d17eadc20e728c6">REMMINA_RDP_FEATURE_SCALE</a>:</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#a96c4689f6bc062482536038cb3b24e78">scale</a> = remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#ac676fc7d8e4d97ec582c2062841afb7b">remmina_protocol_widget_get_current_scale_mode</a>(gp);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <a class="code" href="../../dc/dd7/rdp__event_8c.html#a64ce0c66bb4cb6ddaee263ce8563f497">remmina_rdp_event_update_scale</a>(gp);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/db5/rdp__plugin_8c.html#aea6bc951b2a6212e254de34f8663cfbb">REMMINA_RDP_FEATURE_DYNRESUPDATE</a>:</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a88dc1df9d8cfdcf67ddac10dcafd8b82">REMMINA_RDP_FEATURE_TOOL_REFRESH</a>:</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            gtk_widget_queue_draw_area(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>, 0, 0,</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#ad0b7c4c0a75ae1c738610c6ce7c89df3">protocol_plugin_get_width</a>(gp),</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a290d3c9c09de3456167290228014e8d5">protocol_plugin_get_height</a>(gp));</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a01815b7e88a63d13125a313577fb5d44">REMMINA_RDP_FEATURE_TOOL_SENDCTRLALTDEL</a>:</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            remmina_rdp_send_ctrlaltdel(gp);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    }</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;}</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment">/* Send a keystroke to the plugin window */</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> remmina_rdp_keystroke(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a> *gp, <span class="keyword">const</span> guint keystrokes[], <span class="keyword">const</span> gint keylen)</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;{</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_rdp_keystroke&quot;</span>);</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a6944e4b47485a470ad2672d225ccd9ac">protocol_plugin_send_keys_signals</a>(rfi-&gt;<a class="code" href="../../d0/dc9/structrf__context.html#acee2095e72fb2428c498f62e21800026">drawing_area</a>,</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        keystrokes, keylen, GDK_KEY_PRESS | GDK_KEY_RELEASE);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;}</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="keyword">static</span> gboolean remmina_rdp_get_screenshot(<a class="code" href="../../de/d76/struct___remmina_protocol_widget.html">RemminaProtocolWidget</a> *gp, <a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html">RemminaPluginScreenshotData</a> *rpsd)</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;{</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <a class="code" href="../../d0/dc9/structrf__context.html">rfContext</a>* rfi = <a class="code" href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a>(gp);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        rdpGdi* gdi;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordtype">size_t</span> szmem;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        UINT32 bytesPerPixel;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        UINT32 bitsPerPixel;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="keywordflow">if</span> (!rfi)</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        gdi = ((rdpContext *)rfi)-&gt;gdi;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        bytesPerPixel = GetBytesPerPixel(gdi-&gt;hdc-&gt;format);</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        bitsPerPixel = GetBitsPerPixel(gdi-&gt;hdc-&gt;format);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="comment">/* ToDo: we should lock freerdp subthread to update rfi-&gt;primary_buffer, rfi-&gt;gdi and w/h,</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">         * from here to memcpy, but... how ? */</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        szmem = gdi-&gt;width * gdi-&gt;height * bytesPerPixel;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP] allocating %zu bytes for a full screenshot\n&quot;</span>, szmem);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        rpsd-&gt;<a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#a757f692624e3e110eaa5bf0c05ac2a6c">buffer</a> = malloc(szmem);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">if</span> (!rpsd-&gt;<a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#a757f692624e3e110eaa5bf0c05ac2a6c">buffer</a>)</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            remmina_plugin_service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">log_printf</a>(<span class="stringliteral">&quot;[RDP] unable to allocate %zu bytes for a full screenshot\n&quot;</span>, szmem);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        rpsd-&gt;<a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#ab5d115d8f9fc675f2419d38cdd424ce6">width</a> = gdi-&gt;width;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        rpsd-&gt;<a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#a9274a9d62e527ca25683af512505242e">height</a> = gdi-&gt;height;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        rpsd-&gt;<a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#acc352444c31929a1ef7aee2a0e37827d">bitsPerPixel</a> = bitsPerPixel;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        rpsd-&gt;<a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#aa0f78eb9b36ba248c2e368684903ae44">bytesPerPixel</a> = bytesPerPixel;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        memcpy(rpsd-&gt;<a class="code" href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#a757f692624e3e110eaa5bf0c05ac2a6c">buffer</a>, gdi-&gt;primary_buffer, szmem);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="comment">/* Returning TRUE instruct also the caller to deallocate rpsd-&gt;buffer */</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">/* Array of key/value pairs for color depths */</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="keyword">static</span> gpointer colordepth_list[] =</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;{</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="stringliteral">&quot;8&quot;</span>, N_(<span class="stringliteral">&quot;256 colors (8 bpp)&quot;</span>),</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="stringliteral">&quot;15&quot;</span>, N_(<span class="stringliteral">&quot;High color (15 bpp)&quot;</span>),</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="stringliteral">&quot;16&quot;</span>, N_(<span class="stringliteral">&quot;High color (16 bpp)&quot;</span>),</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="stringliteral">&quot;24&quot;</span>, N_(<span class="stringliteral">&quot;True color (24 bpp)&quot;</span>),</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="stringliteral">&quot;32&quot;</span>, N_(<span class="stringliteral">&quot;True color (32 bpp)&quot;</span>),</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="stringliteral">&quot;0&quot;</span>, N_(<span class="stringliteral">&quot;RemoteFX (32 bpp)&quot;</span>),</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    NULL</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;};</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">/* Array of key/value pairs for quality selection */</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="keyword">static</span> gpointer quality_list[] =</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;{</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="stringliteral">&quot;0&quot;</span>, N_(<span class="stringliteral">&quot;Poor (fastest)&quot;</span>),</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="stringliteral">&quot;1&quot;</span>, N_(<span class="stringliteral">&quot;Medium&quot;</span>),</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="stringliteral">&quot;2&quot;</span>, N_(<span class="stringliteral">&quot;Good&quot;</span>),</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="stringliteral">&quot;9&quot;</span>, N_(<span class="stringliteral">&quot;Best (slowest)&quot;</span>),</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    NULL</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;};</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">/* Array of key/value pairs for sound options */</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="keyword">static</span> gpointer sound_list[] =</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;{</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="stringliteral">&quot;off&quot;</span>, N_(<span class="stringliteral">&quot;Off&quot;</span>),</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="stringliteral">&quot;local&quot;</span>, N_(<span class="stringliteral">&quot;Local&quot;</span>),</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="stringliteral">&quot;local,11025,1&quot;</span>, N_(<span class="stringliteral">&quot;Local - low quality&quot;</span>),</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="stringliteral">&quot;local,22050,2&quot;</span>, N_(<span class="stringliteral">&quot;Local - medium quality&quot;</span>),</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="stringliteral">&quot;local,44100,2&quot;</span>, N_(<span class="stringliteral">&quot;Local - high quality&quot;</span>),</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="stringliteral">&quot;remote&quot;</span>, N_(<span class="stringliteral">&quot;Remote&quot;</span>),</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    NULL</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;};</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">/* Array of key/value pairs for security */</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="keyword">static</span> gpointer security_list[] =</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;{</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="stringliteral">&quot;&quot;</span>, N_(<span class="stringliteral">&quot;Negotiate&quot;</span>),</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="stringliteral">&quot;nla&quot;</span>, <span class="stringliteral">&quot;NLA&quot;</span>,</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="stringliteral">&quot;tls&quot;</span>, <span class="stringliteral">&quot;TLS&quot;</span>,</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="stringliteral">&quot;rdp&quot;</span>, <span class="stringliteral">&quot;RDP&quot;</span>,</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    NULL</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;};</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">/* Array of RemminaProtocolSetting for basic settings.</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment"> * Each item is composed by:</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment"> * a) RemminaProtocolSettingType for setting type</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment"> * b) Setting name</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment"> * c) Setting description</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment"> * d) Compact disposition</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"> * e) Values for REMMINA_PROTOCOL_SETTING_TYPE_SELECT or REMMINA_PROTOCOL_SETTING_TYPE_COMBO</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment"> * f) Unused pointer</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d5/db7/struct___remmina_protocol_setting.html">RemminaProtocolSetting</a> remmina_rdp_basic_settings[] =</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;{</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a579ed0f0f6624dd55a25665693c92a92">REMMINA_PROTOCOL_SETTING_TYPE_SERVER</a>, <span class="stringliteral">&quot;server&quot;</span>, NULL, FALSE, NULL, NULL },</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;username&quot;</span>, N_(<span class="stringliteral">&quot;User name&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350ae76d06b6e313971e5f420dd6e7f4c5aa">REMMINA_PROTOCOL_SETTING_TYPE_PASSWORD</a>, <span class="stringliteral">&quot;password&quot;</span>, N_(<span class="stringliteral">&quot;User password&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;domain&quot;</span>, N_(<span class="stringliteral">&quot;Domain&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350aa045109309280606ff11a9de1862e2ba">REMMINA_PROTOCOL_SETTING_TYPE_RESOLUTION</a>, <span class="stringliteral">&quot;resolution&quot;</span>, NULL, FALSE, NULL, NULL },</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a04da01eead7904a55d1c813950609b2d">REMMINA_PROTOCOL_SETTING_TYPE_SELECT</a>, <span class="stringliteral">&quot;colordepth&quot;</span>, N_(<span class="stringliteral">&quot;Color depth&quot;</span>), FALSE, colordepth_list, NULL },</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a68b440d346168aadb6fd728ea394607f">REMMINA_PROTOCOL_SETTING_TYPE_FOLDER</a>, <span class="stringliteral">&quot;sharefolder&quot;</span>, N_(<span class="stringliteral">&quot;Share folder&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;disableautoreconnect&quot;</span>, N_(<span class="stringliteral">&quot;Disable automatic reconnection&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350ad898beb6ae625dee1ae27de75f1ab4e3">REMMINA_PROTOCOL_SETTING_TYPE_END</a>, NULL, NULL, FALSE, NULL, NULL }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;};</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">/* Array of RemminaProtocolSetting for advanced settings.</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment"> * Each item is composed by:</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment"> * a) RemminaProtocolSettingType for setting type</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment"> * b) Setting name</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment"> * c) Setting description</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment"> * d) Compact disposition</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment"> * e) Values for REMMINA_PROTOCOL_SETTING_TYPE_SELECT or REMMINA_PROTOCOL_SETTING_TYPE_COMBO</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment"> * f) Unused pointer</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d5/db7/struct___remmina_protocol_setting.html">RemminaProtocolSetting</a> remmina_rdp_advanced_settings[] =</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;{</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a04da01eead7904a55d1c813950609b2d">REMMINA_PROTOCOL_SETTING_TYPE_SELECT</a>, <span class="stringliteral">&quot;quality&quot;</span>, N_(<span class="stringliteral">&quot;Quality&quot;</span>), FALSE, quality_list, NULL },</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a04da01eead7904a55d1c813950609b2d">REMMINA_PROTOCOL_SETTING_TYPE_SELECT</a>, <span class="stringliteral">&quot;sound&quot;</span>, N_(<span class="stringliteral">&quot;Sound&quot;</span>), FALSE, sound_list, NULL },</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a04da01eead7904a55d1c813950609b2d">REMMINA_PROTOCOL_SETTING_TYPE_SELECT</a>, <span class="stringliteral">&quot;security&quot;</span>, N_(<span class="stringliteral">&quot;Security&quot;</span>), FALSE, security_list, NULL },</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;gateway_server&quot;</span>, N_(<span class="stringliteral">&quot;RD Gateway server&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;gateway_username&quot;</span>, N_(<span class="stringliteral">&quot;RD Gateway username&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350ae76d06b6e313971e5f420dd6e7f4c5aa">REMMINA_PROTOCOL_SETTING_TYPE_PASSWORD</a>, <span class="stringliteral">&quot;gateway_password&quot;</span>,  N_(<span class="stringliteral">&quot;RD Gateway password&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;gateway_domain&quot;</span>, N_(<span class="stringliteral">&quot;RD Gateway domain&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;clientname&quot;</span>, N_(<span class="stringliteral">&quot;Client name&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;exec&quot;</span>, N_(<span class="stringliteral">&quot;Startup program&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;execpath&quot;</span>, N_(<span class="stringliteral">&quot;Startup path&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a>, <span class="stringliteral">&quot;loadbalanceinfo&quot;</span>, N_(<span class="stringliteral">&quot;Load Balance Info&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;cert_ignore&quot;</span>, N_(<span class="stringliteral">&quot;Ignore certificate&quot;</span>), TRUE, NULL, NULL },</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;microphone&quot;</span>, N_(<span class="stringliteral">&quot;Redirect local microphone&quot;</span>), TRUE, NULL, NULL },</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;sharesmartcard&quot;</span>, N_(<span class="stringliteral">&quot;Share smartcard&quot;</span>), TRUE, NULL, NULL },</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;shareprinter&quot;</span>, N_(<span class="stringliteral">&quot;Share local printers&quot;</span>), TRUE, NULL, NULL },</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;disablepasswordstoring&quot;</span>, N_(<span class="stringliteral">&quot;Disable password storing&quot;</span>), TRUE, NULL, NULL },</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;disableclipboard&quot;</span>, N_(<span class="stringliteral">&quot;Disable clipboard sync&quot;</span>), TRUE, NULL, NULL },</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;console&quot;</span>, N_(<span class="stringliteral">&quot;Attach to console (2003/2003 R2)&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a>, <span class="stringliteral">&quot;gateway_usage&quot;</span>, N_(<span class="stringliteral">&quot;Server detection using RD Gateway&quot;</span>), FALSE, NULL, NULL },</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350ad898beb6ae625dee1ae27de75f1ab4e3">REMMINA_PROTOCOL_SETTING_TYPE_END</a>, NULL, NULL, FALSE, NULL, NULL }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;};</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment">/* Array for available features.</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment"> * The last element of the array must be REMMINA_PROTOCOL_FEATURE_TYPE_END. */</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../dc/de3/struct___remmina_protocol_feature.html">RemminaProtocolFeature</a> remmina_rdp_features[] =</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;{</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a645d9a32b55325b3672e265a64d0a507">REMMINA_PROTOCOL_FEATURE_TYPE_TOOL</a>, <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a88dc1df9d8cfdcf67ddac10dcafd8b82">REMMINA_RDP_FEATURE_TOOL_REFRESH</a>, N_(<span class="stringliteral">&quot;Refresh&quot;</span>), NULL, NULL },</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5affe302f5d3151bfe99607edf308c3c9f">REMMINA_PROTOCOL_FEATURE_TYPE_SCALE</a>, <a class="code" href="../../d5/db5/rdp__plugin_8c.html#aa0f211a8cbe456889d17eadc20e728c6">REMMINA_RDP_FEATURE_SCALE</a>, NULL, NULL, NULL },</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a23e854b5f2eb0c8d3efa54cac0acb6cf">REMMINA_PROTOCOL_FEATURE_TYPE_DYNRESUPDATE</a>, <a class="code" href="../../d5/db5/rdp__plugin_8c.html#aea6bc951b2a6212e254de34f8663cfbb">REMMINA_RDP_FEATURE_DYNRESUPDATE</a>, NULL, NULL, NULL },</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a645d9a32b55325b3672e265a64d0a507">REMMINA_PROTOCOL_FEATURE_TYPE_TOOL</a>, <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a01815b7e88a63d13125a313577fb5d44">REMMINA_RDP_FEATURE_TOOL_SENDCTRLALTDEL</a>, N_(<span class="stringliteral">&quot;Send Ctrl+Alt+Delete&quot;</span>), NULL, NULL },</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a0658dd6adcfaf5cb52d6d99c97c352d1">REMMINA_PROTOCOL_FEATURE_TYPE_UNFOCUS</a>, <a class="code" href="../../d5/db5/rdp__plugin_8c.html#ae92439cbe502ccd966ff82177b38f576">REMMINA_RDP_FEATURE_UNFOCUS</a>, NULL, NULL, NULL },</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    { <a class="code" href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a311d2a8dae8d3d7b9045b4b704f94fe4">REMMINA_PROTOCOL_FEATURE_TYPE_END</a>, 0, NULL, NULL, NULL }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;};</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">/* Protocol plugin definition and features */</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d0/d02/struct___remmina_protocol_plugin.html">RemminaProtocolPlugin</a> remmina_rdp =</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;{</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="../../d9/dc4/plugin_8h.html#aaf53c620d115a4642130227cff4a624aa45e094c248384c12cdafd9d088e4aa24">REMMINA_PLUGIN_TYPE_PROTOCOL</a>,                 <span class="comment">// Type</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="stringliteral">&quot;RDP&quot;</span>,                                        <span class="comment">// Name</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    N_(<span class="stringliteral">&quot;RDP - Remote Desktop Protocol&quot;</span>),          <span class="comment">// Description</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="../../db/d16/config_8h.html#ab23870bd5469d09c183b5a4e89efd81d">GETTEXT_PACKAGE</a>,                              <span class="comment">// Translation domain</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#ae227918d1a30e882b70a269238905ccc">REMMINA_PLUGIN_RDP_VERSION</a>,                   <span class="comment">// Version number</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="stringliteral">&quot;remmina-rdp&quot;</span>,                                <span class="comment">// Icon for normal connection</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="stringliteral">&quot;remmina-rdp-ssh&quot;</span>,                            <span class="comment">// Icon for SSH connection</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    remmina_rdp_basic_settings,                   <span class="comment">// Array for basic settings</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    remmina_rdp_advanced_settings,                <span class="comment">// Array for advanced settings</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <a class="code" href="../../d9/d49/types_8h.html#a64c62354cc2b7baa50e1d73dcd3df9c7ab0449f571d03e46b99b301792a5d8e1a">REMMINA_PROTOCOL_SSH_SETTING_TUNNEL</a>,          <span class="comment">// SSH settings type</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    remmina_rdp_features,                         <span class="comment">// Array for available features</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    remmina_rdp_init,                             <span class="comment">// Plugin initialization</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    remmina_rdp_open_connection,                  <span class="comment">// Plugin open connection</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    remmina_rdp_close_connection,                 <span class="comment">// Plugin close connection</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    remmina_rdp_query_feature,                    <span class="comment">// Query for available features</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    remmina_rdp_call_feature,                     <span class="comment">// Call a feature</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    remmina_rdp_keystroke,                        <span class="comment">// Send a keystroke</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    remmina_rdp_get_screenshot                    <span class="comment">// Screenshot</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;};</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">/* File plugin definition and features */</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d5/dc6/struct___remmina_file_plugin.html">RemminaFilePlugin</a> remmina_rdpf =</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;{</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <a class="code" href="../../d9/dc4/plugin_8h.html#aaf53c620d115a4642130227cff4a624aa9af260da7aa2ad0ee90e8dae5439dbac">REMMINA_PLUGIN_TYPE_FILE</a>,                     <span class="comment">// Type</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="stringliteral">&quot;RDPF&quot;</span>,                                       <span class="comment">// Name</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    N_(<span class="stringliteral">&quot;RDP - RDP File Handler&quot;</span>),                 <span class="comment">// Description</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="../../db/d16/config_8h.html#ab23870bd5469d09c183b5a4e89efd81d">GETTEXT_PACKAGE</a>,                              <span class="comment">// Translation domain</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#ae227918d1a30e882b70a269238905ccc">REMMINA_PLUGIN_RDP_VERSION</a>,                                      <span class="comment">// Version number</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="../../d0/d9a/rdp__file_8c.html#a8b1b44a7a6367e3bca60a6ba6fd086ce">remmina_rdp_file_import_test</a>,                 <span class="comment">// Test import function</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <a class="code" href="../../d0/d9a/rdp__file_8c.html#aae001941e15e94a2d6456cc02e5ef75c">remmina_rdp_file_import</a>,                      <span class="comment">// Import function</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <a class="code" href="../../d0/d9a/rdp__file_8c.html#a6d00c37987b9f5b09959944d01142310">remmina_rdp_file_export_test</a>,                 <span class="comment">// Test export function</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <a class="code" href="../../d0/d9a/rdp__file_8c.html#a263e269a1f8cfb21ba78d4b57ce2c47b">remmina_rdp_file_export</a>,                      <span class="comment">// Export function</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    NULL</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;};</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">/* Preferences plugin definition and features */</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d1/dab/struct___remmina_pref_plugin.html">RemminaPrefPlugin</a> remmina_rdps =</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;{</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <a class="code" href="../../d9/dc4/plugin_8h.html#aaf53c620d115a4642130227cff4a624aa682ab42b3f4af3dd93452efdb76b8757">REMMINA_PLUGIN_TYPE_PREF</a>,                     <span class="comment">// Type</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="stringliteral">&quot;RDPS&quot;</span>,                                       <span class="comment">// Name</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    N_(<span class="stringliteral">&quot;RDP - Preferences&quot;</span>),                      <span class="comment">// Description</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <a class="code" href="../../db/d16/config_8h.html#ab23870bd5469d09c183b5a4e89efd81d">GETTEXT_PACKAGE</a>,                              <span class="comment">// Translation domain</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="../../d8/dc9/rdp__plugin_8h.html#ae227918d1a30e882b70a269238905ccc">REMMINA_PLUGIN_RDP_VERSION</a>,                                      <span class="comment">// Version number</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="stringliteral">&quot;RDP&quot;</span>,                                        <span class="comment">// Label</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <a class="code" href="../../d3/dc2/rdp__settings_8c.html#adc5f59377e21db6e1aef8bfc2da24b53">remmina_rdp_settings_new</a>                      <span class="comment">// Preferences body function</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;};</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"><a class="line" href="../../d5/db5/rdp__plugin_8c.html#a56e5020de11446dbc23f3480e313f208"> 1511</a></span>&#160;G_MODULE_EXPORT gboolean <a class="code" href="../../d5/db5/rdp__plugin_8c.html#a56e5020de11446dbc23f3480e313f208">remmina_plugin_entry</a>(<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html">RemminaPluginService</a>* service)</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;{</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="keywordtype">int</span> vermaj, vermin, verrev;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a>(<span class="stringliteral">&quot;remmina_plugin_entry&quot;</span>);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    remmina_plugin_service = service;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="comment">/* Check that we are linked to the correct version of libfreerdp */</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    freerdp_get_version(&amp;vermaj, &amp;vermin, &amp;verrev);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span> (vermaj &lt; FREERDP_REQUIRED_MAJOR ||</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        (vermaj == FREERDP_REQUIRED_MAJOR &amp;&amp; ( vermin &lt; FREERDP_REQUIRED_MINOR ||</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        (vermin == FREERDP_REQUIRED_MINOR &amp;&amp; verrev &lt; FREERDP_REQUIRED_REVISION) ) ) ) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        g_printf(<span class="stringliteral">&quot;Unable to load RDP plugin due to bad freerdp library version. Required &quot;</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;            <span class="stringliteral">&quot;libfreerdp version is at least %d.%d.%d but we found libfreerdp version %d.%d.%d\n&quot;</span>,</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            FREERDP_REQUIRED_MAJOR, FREERDP_REQUIRED_MINOR, FREERDP_REQUIRED_REVISION,</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            vermaj, vermin, verrev );</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    }</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    bindtextdomain(<a class="code" href="../../db/d16/config_8h.html#ab23870bd5469d09c183b5a4e89efd81d">GETTEXT_PACKAGE</a>, <a class="code" href="../../db/d16/config_8h.html#aba127e7146091407342004c8d8da6549">REMMINA_RUNTIME_LOCALEDIR</a>);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    bind_textdomain_codeset(<a class="code" href="../../db/d16/config_8h.html#ab23870bd5469d09c183b5a4e89efd81d">GETTEXT_PACKAGE</a>, <span class="stringliteral">&quot;UTF-8&quot;</span>);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">if</span> (! service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a1545f36d1291523b9de7fb546fcb07ba">register_plugin</a>((<a class="code" href="../../d7/dfd/struct___remmina_plugin.html">RemminaPlugin</a>*) &amp;remmina_rdp))</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    remmina_rdpf.<a class="code" href="../../d5/dc6/struct___remmina_file_plugin.html#ac4f2b0118490cede0577aaee9f2e0b5f">export_hints</a> = _(<span class="stringliteral">&quot;Export connection in Windows .rdp file format&quot;</span>);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">if</span> (! service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a1545f36d1291523b9de7fb546fcb07ba">register_plugin</a>((<a class="code" href="../../d7/dfd/struct___remmina_plugin.html">RemminaPlugin</a>*) &amp;remmina_rdpf))</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">if</span> (! service-&gt;<a class="code" href="../../d2/d1b/struct___remmina_plugin_service.html#a1545f36d1291523b9de7fb546fcb07ba">register_plugin</a>((<a class="code" href="../../d7/dfd/struct___remmina_plugin.html">RemminaPlugin</a>*) &amp;remmina_rdps))</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <a class="code" href="../../d3/dc2/rdp__settings_8c.html#acf37368f3376add8547723d13443cccb">remmina_rdp_settings_init</a>();</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span> TRUE;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="ttc" id="struct___remmina_plugin_service_html_ac676fc7d8e4d97ec582c2062841afb7b"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#ac676fc7d8e4d97ec582c2062841afb7b">_RemminaPluginService::remmina_protocol_widget_get_current_scale_mode</a></div><div class="ttdeci">RemminaScaleMode(* remmina_protocol_widget_get_current_scale_mode)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00162">plugin.h:162</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a9716956dfd351175bde8181d92ad68f9"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a9716956dfd351175bde8181d92ad68f9">_RemminaPluginService::pref_get_value</a></div><div class="ttdeci">gchar *(* pref_get_value)(const gchar *key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00214">plugin.h:214</a></div></div>
<div class="ttc" id="structrf__clipboard_html_a773214c0bb4f351a609a085f786304aa"><div class="ttname"><a href="../../dc/db9/structrf__clipboard.html#a773214c0bb4f351a609a085f786304aa">rf_clipboard::context</a></div><div class="ttdeci">CliprdrClientContext * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00072">rdp_plugin.h:72</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350a579ed0f0f6624dd55a25665693c92a92"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a579ed0f0f6624dd55a25665693c92a92">REMMINA_PROTOCOL_SETTING_TYPE_SERVER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00085">types.h:85</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a663e2e70d2f51daa97666142fdde98d0"><div class="ttname"><a href="../../d0/d4c/structremmina__plugin__rdp__event.html#a663e2e70d2f51daa97666142fdde98d0">remmina_plugin_rdp_event::clipboard_formatlist</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@40::@44 clipboard_formatlist</div></div>
<div class="ttc" id="structrf__context_html_aa574515edb4966117f539d26e26f0a62"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#aa574515edb4966117f539d26e26f0a62">rf_context::thread_cancelled</a></div><div class="ttdeci">gboolean thread_cancelled</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00271">rdp_plugin.h:271</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a20b531c3036273bb4f2de64ac33c9bf3"><div class="ttname"><a href="../../d0/d4c/structremmina__plugin__rdp__event.html#a20b531c3036273bb4f2de64ac33c9bf3">remmina_plugin_rdp_event::clipboard_formatdatarequest</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@40::@46 clipboard_formatdatarequest</div></div>
<div class="ttc" id="structrf__context_html_aec5322e26b76a0411e1f93f8e945b762"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#aec5322e26b76a0411e1f93f8e945b762">rf_context::hdc</a></div><div class="ttdeci">HGDI_DC hdc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00296">rdp_plugin.h:296</a></div></div>
<div class="ttc" id="struct___remmina_plugin_html"><div class="ttname"><a href="../../d7/dfd/struct___remmina_plugin.html">_RemminaPlugin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00055">plugin.h:55</a></div></div>
<div class="ttc" id="structrf__context_html_af40c80ff8296b9bcc3ac437bf0be55f8"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#af40c80ff8296b9bcc3ac437bf0be55f8">rf_context::is_reconnecting</a></div><div class="ttdeci">gboolean is_reconnecting</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00283">rdp_plugin.h:283</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a05a9fd1175ebca85a3136c3506920c3b"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a05a9fd1175ebca85a3136c3506920c3b">_RemminaPluginService::protocol_plugin_set_error</a></div><div class="ttdeci">void(* protocol_plugin_set_error)(RemminaProtocolWidget *gp, const gchar *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00166">plugin.h:166</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a4187002c92c9792c1caf441941aa4cea"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a4187002c92c9792c1caf441941aa4cea">_RemminaPluginService::protocol_plugin_start_direct_tunnel</a></div><div class="ttdeci">gchar *(* protocol_plugin_start_direct_tunnel)(RemminaProtocolWidget *gp, gint default_port, gboolean port_plus)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00171">plugin.h:171</a></div></div>
<div class="ttc" id="types_8h_html_a77ae46c4fd739dcd8e819fe9cdae27c5a23e854b5f2eb0c8d3efa54cac0acb6cf"><div class="ttname"><a href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a23e854b5f2eb0c8d3efa54cac0acb6cf">REMMINA_PROTOCOL_FEATURE_TYPE_DYNRESUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00051">types.h:51</a></div></div>
<div class="ttc" id="remmina__public_8h_html_a0217e3fd8e00ca76249f6879117c31ff"><div class="ttname"><a href="../../d1/d53/remmina__public_8h.html#a0217e3fd8e00ca76249f6879117c31ff">CANCEL_ASYNC</a></div><div class="ttdeci">#define CANCEL_ASYNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d53/remmina__public_8h_source.html#l00044">remmina_public.h:44</a></div></div>
<div class="ttc" id="structrf__context_html_acacad775c2c168f900deaa6c90481319"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#acacad775c2c168f900deaa6c90481319">rf_context::user_cancelled</a></div><div class="ttdeci">gboolean user_cancelled</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00270">rdp_plugin.h:270</a></div></div>
<div class="ttc" id="structrf__context_html_a40e89e126e5dd96a3f67e6f945a8867b"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a40e89e126e5dd96a3f67e6f945a8867b">rf_context::bpp</a></div><div class="ttdeci">gint bpp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00302">rdp_plugin.h:302</a></div></div>
<div class="ttc" id="structrf__context_html_a539feef609228a91c5e54d5da837bb7a"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a539feef609228a91c5e54d5da837bb7a">rf_context::event_pipe</a></div><div class="ttdeci">gint event_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00318">rdp_plugin.h:318</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a52a80f3f9b84e9e0d0bf3335cfd7527f">REMMINA_PROTOCOL_SETTING_TYPE_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00093">types.h:93</a></div></div>
<div class="ttc" id="structrf__context_html"><div class="ttname"><a href="../../d0/dc9/structrf__context.html">rf_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00258">rdp_plugin.h:258</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350a68b440d346168aadb6fd728ea394607f"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a68b440d346168aadb6fd728ea394607f">REMMINA_PROTOCOL_SETTING_TYPE_FOLDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00095">types.h:95</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_aa0f211a8cbe456889d17eadc20e728c6"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#aa0f211a8cbe456889d17eadc20e728c6">REMMINA_RDP_FEATURE_SCALE</a></div><div class="ttdeci">#define REMMINA_RDP_FEATURE_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00058">rdp_plugin.c:58</a></div></div>
<div class="ttc" id="types_8h_html_aeea5ee1e675368413b6f6ab09883e7dea4d22c6eed721b661d618098159a20946"><div class="ttname"><a href="../../d9/d49/types_8h.html#aeea5ee1e675368413b6f6ab09883e7dea4d22c6eed721b661d618098159a20946">REMMINA_PROTOCOL_WIDGET_SCALE_MODE_DYNRES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00127">types.h:127</a></div></div>
<div class="ttc" id="rdp__channels_8c_html_a5850b939a52886321d6e4c3e5e62f97d"><div class="ttname"><a href="../../d6/d97/rdp__channels_8c.html#a5850b939a52886321d6e4c3e5e62f97d">remmina_rdp_OnChannelDisconnectedEventHandler</a></div><div class="ttdeci">void remmina_rdp_OnChannelDisconnectedEventHandler(rdpContext *context, ChannelConnectedEventArgs *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/rdp__channels_8c_source.html#l00095">rdp_channels.c:95</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a8be3f210c609fde31f68e607c41de296">REMMINA_PROTOCOL_SETTING_TYPE_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00090">types.h:90</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html"><div class="ttname"><a href="../../d0/d4c/structremmina__plugin__rdp__event.html">remmina_plugin_rdp_event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00122">rdp_plugin.h:122</a></div></div>
<div class="ttc" id="struct___remmina_file_plugin_html"><div class="ttname"><a href="../../d5/dc6/struct___remmina_file_plugin.html">_RemminaFilePlugin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00099">plugin.h:99</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a35129ddf407583351c1bb914e9141cbd"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a35129ddf407583351c1bb914e9141cbd">_RemminaPluginService::protocol_plugin_init_certificate</a></div><div class="ttdeci">gint(* protocol_plugin_init_certificate)(RemminaProtocolWidget *gp, const gchar *subject, const gchar *issuer, const gchar *fingerprint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00178">plugin.h:178</a></div></div>
<div class="ttc" id="types_8h_html_a112d7cc6c755209cabb68cf2a62ad515"><div class="ttname"><a href="../../d9/d49/types_8h.html#a112d7cc6c755209cabb68cf2a62ad515">RemminaFile</a></div><div class="ttdeci">typedefG_BEGIN_DECLS struct _RemminaFile RemminaFile</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00042">types.h:42</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7a899b766953e73fd8aa148a9d8f28434b"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a899b766953e73fd8aa148a9d8f28434b">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_REQUEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00118">rdp_plugin.h:118</a></div></div>
<div class="ttc" id="plugin_8h_html_aaf53c620d115a4642130227cff4a624aa9af260da7aa2ad0ee90e8dae5439dbac"><div class="ttname"><a href="../../d9/dc4/plugin_8h.html#aaf53c620d115a4642130227cff4a624aa9af260da7aa2ad0ee90e8dae5439dbac">REMMINA_PLUGIN_TYPE_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00049">plugin.h:49</a></div></div>
<div class="ttc" id="struct___remmina_file_plugin_html_ac4f2b0118490cede0577aaee9f2e0b5f"><div class="ttname"><a href="../../d5/dc6/struct___remmina_file_plugin.html#ac4f2b0118490cede0577aaee9f2e0b5f">_RemminaFilePlugin::export_hints</a></div><div class="ttdeci">const gchar * export_hints</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00111">plugin.h:111</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7aebb0df0651989a89f3f05e3c4894dd50"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7aebb0df0651989a89f3f05e3c4894dd50">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_LIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00116">rdp_plugin.h:116</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html"><div class="ttname"><a href="../../d8/d74/structremmina__plugin__rdp__ui__object.html">remmina_plugin_rdp_ui_object</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00200">rdp_plugin.h:200</a></div></div>
<div class="ttc" id="struct___remmina_protocol_feature_html_a36b55faeba78528ac9708dfa66667e20"><div class="ttname"><a href="../../dc/de3/struct___remmina_protocol_feature.html#a36b55faeba78528ac9708dfa66667e20">_RemminaProtocolFeature::id</a></div><div class="ttdeci">gint id</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00060">types.h:60</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350ae76d06b6e313971e5f420dd6e7f4c5aa"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350ae76d06b6e313971e5f420dd6e7f4c5aa">REMMINA_PROTOCOL_SETTING_TYPE_PASSWORD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00086">types.h:86</a></div></div>
<div class="ttc" id="rdp__settings_8c_html_a5f05047cf10611ffb7a23a248650cb4c"><div class="ttname"><a href="../../d3/dc2/rdp__settings_8c.html#a5f05047cf10611ffb7a23a248650cb4c">remmina_rdp_settings_get_orientation_scale_prefs</a></div><div class="ttdeci">void remmina_rdp_settings_get_orientation_scale_prefs(int *desktopOrientation, int *desktopScaleFactor, int *deviceScaleFactor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc2/rdp__settings_8c_source.html#l00624">rdp_settings.c:624</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a1e2313a63a9cfd208ab722cc1e0ee072aa5f6f338ffaa4bed53b225cf54b50000"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072aa5f6f338ffaa4bed53b225cf54b50000">REMMINA_RDP_UI_EVENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00173">rdp_plugin.h:173</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a8281727d61c39f8f4e03c9f907844f83"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a8281727d61c39f8f4e03c9f907844f83">_RemminaPluginService::file_unsave_password</a></div><div class="ttdeci">void(* file_unsave_password)(RemminaFile *remminafile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00211">plugin.h:211</a></div></div>
<div class="ttc" id="plugin_8h_html_aaf53c620d115a4642130227cff4a624aa45e094c248384c12cdafd9d088e4aa24"><div class="ttname"><a href="../../d9/dc4/plugin_8h.html#aaf53c620d115a4642130227cff4a624aa45e094c248384c12cdafd9d088e4aa24">REMMINA_PLUGIN_TYPE_PROTOCOL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00047">plugin.h:47</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a2ec603ddb273c9729c7694f1c88665d8"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a2ec603ddb273c9729c7694f1c88665d8">_RemminaPluginService::log_printf</a></div><div class="ttdeci">void(* log_printf)(const gchar *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00222">plugin.h:222</a></div></div>
<div class="ttc" id="rdp__graphics_8c_html_a95732c40c35499f3440715b6526279b1"><div class="ttname"><a href="../../dd/d24/rdp__graphics_8c.html#a95732c40c35499f3440715b6526279b1">rf_register_graphics</a></div><div class="ttdeci">void rf_register_graphics(rdpGraphics *graphics)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d24/rdp__graphics_8c_source.html#l00395">rdp_graphics.c:395</a></div></div>
<div class="ttc" id="rdp__settings_8c_html_acf37368f3376add8547723d13443cccb"><div class="ttname"><a href="../../d3/dc2/rdp__settings_8c.html#acf37368f3376add8547723d13443cccb">remmina_rdp_settings_init</a></div><div class="ttdeci">void remmina_rdp_settings_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc2/rdp__settings_8c_source.html#l00050">rdp_settings.c:50</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html_ab65c695a6089cb396a239ceb3b39416a"><div class="ttname"><a href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#ab65c695a6089cb396a239ceb3b39416a">remmina_plugin_rdp_ui_object::clipboard</a></div><div class="ttdeci">rfClipboard * clipboard</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00241">rdp_plugin.h:241</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_ac3300142e3c2f416896948681ecd45f3"><div class="ttname"><a href="../../d3/db3/rdp__cliprdr_8c.html#ac3300142e3c2f416896948681ecd45f3">remmina_rdp_clipboard_init</a></div><div class="ttdeci">void remmina_rdp_clipboard_init(rfContext *rfi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db3/rdp__cliprdr_8c_source.html#l00832">rdp_cliprdr.c:832</a></div></div>
<div class="ttc" id="structrf__context_html_a05f37c213b04dfb9ae9b38c12bcdf7e3"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a05f37c213b04dfb9ae9b38c12bcdf7e3">rf_context::protocol_widget</a></div><div class="ttdeci">RemminaProtocolWidget * protocol_widget</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00262">rdp_plugin.h:262</a></div></div>
<div class="ttc" id="structrf__context_html_a4c35800dba8da687f7f56e3bb7a23413"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a4c35800dba8da687f7f56e3bb7a23413">rf_context::reconnect_nattempt</a></div><div class="ttdeci">int reconnect_nattempt</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00285">rdp_plugin.h:285</a></div></div>
<div class="ttc" id="types_8h_html_a77ae46c4fd739dcd8e819fe9cdae27c5a311d2a8dae8d3d7b9045b4b704f94fe4"><div class="ttname"><a href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a311d2a8dae8d3d7b9045b4b704f94fe4">REMMINA_PROTOCOL_FEATURE_TYPE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00046">types.h:46</a></div></div>
<div class="ttc" id="struct___remmina_protocol_plugin_html"><div class="ttname"><a href="../../d0/d02/struct___remmina_protocol_plugin.html">_RemminaProtocolPlugin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00064">plugin.h:64</a></div></div>
<div class="ttc" id="rdp__file_8h_html"><div class="ttname"><a href="../../d4/d90/rdp__file_8h.html">rdp_file.h</a></div></div>
<div class="ttc" id="rdp__file_8c_html_a263e269a1f8cfb21ba78d4b57ce2c47b"><div class="ttname"><a href="../../d0/d9a/rdp__file_8c.html#a263e269a1f8cfb21ba78d4b57ce2c47b">remmina_rdp_file_export</a></div><div class="ttdeci">gboolean remmina_rdp_file_export(RemminaFile *remminafile, const gchar *to_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9a/rdp__file_8c_source.html#l00350">rdp_file.c:350</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7a2e49b2022527a7f87ba0115e644d16d6"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a2e49b2022527a7f87ba0115e644d16d6">REMMINA_RDP_EVENT_TYPE_CLIPBOARD_SEND_CLIENT_FORMAT_DATA_RESPONSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00117">rdp_plugin.h:117</a></div></div>
<div class="ttc" id="structrf__context_html_a7dd82061ce0740b32b1fbd72c019aa9a"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a7dd82061ce0740b32b1fbd72c019aa9a">rf_context::height</a></div><div class="ttdeci">gint height</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00304">rdp_plugin.h:304</a></div></div>
<div class="ttc" id="rdp__settings_8c_html_adc5f59377e21db6e1aef8bfc2da24b53"><div class="ttname"><a href="../../d3/dc2/rdp__settings_8c.html#adc5f59377e21db6e1aef8bfc2da24b53">remmina_rdp_settings_new</a></div><div class="ttdeci">GtkWidget * remmina_rdp_settings_new(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc2/rdp__settings_8c_source.html#l00613">rdp_settings.c:613</a></div></div>
<div class="ttc" id="types_8h_html_a77ae46c4fd739dcd8e819fe9cdae27c5a645d9a32b55325b3672e265a64d0a507"><div class="ttname"><a href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a645d9a32b55325b3672e265a64d0a507">REMMINA_PROTOCOL_FEATURE_TYPE_TOOL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00048">types.h:48</a></div></div>
<div class="ttc" id="struct___remmina_plugin_screenshot_data_html_a9274a9d62e527ca25683af512505242e"><div class="ttname"><a href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#a9274a9d62e527ca25683af512505242e">_RemminaPluginScreenshotData::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00071">types.h:71</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a86feac33b8074773d97204a71a42151e"><div class="ttname"><a href="../../d0/d4c/structremmina__plugin__rdp__event.html#a86feac33b8074773d97204a71a42151e">remmina_plugin_rdp_event::mouse_event</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@40::@43 mouse_event</div></div>
<div class="ttc" id="rdp__plugin_8h_html"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html">rdp_plugin.h</a></div></div>
<div class="ttc" id="structrf__context_html_aa0b949ab1e2f06b7d5efeccc924efaee"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#aa0b949ab1e2f06b7d5efeccc924efaee">rf_context::reconnect_maxattempts</a></div><div class="ttdeci">int reconnect_maxattempts</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00284">rdp_plugin.h:284</a></div></div>
<div class="ttc" id="rdp__file_8c_html_a6d00c37987b9f5b09959944d01142310"><div class="ttname"><a href="../../d0/d9a/rdp__file_8c.html#a6d00c37987b9f5b09959944d01142310">remmina_rdp_file_export_test</a></div><div class="ttdeci">gboolean remmina_rdp_file_export_test(RemminaFile *remminafile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9a/rdp__file_8c_source.html#l00271">rdp_file.c:271</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_ae92439cbe502ccd966ff82177b38f576"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#ae92439cbe502ccd966ff82177b38f576">REMMINA_RDP_FEATURE_UNFOCUS</a></div><div class="ttdeci">#define REMMINA_RDP_FEATURE_UNFOCUS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00059">rdp_plugin.c:59</a></div></div>
<div class="ttc" id="types_8h_html_a77ae46c4fd739dcd8e819fe9cdae27c5affe302f5d3151bfe99607edf308c3c9f"><div class="ttname"><a href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5affe302f5d3151bfe99607edf308c3c9f">REMMINA_PROTOCOL_FEATURE_TYPE_SCALE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00050">types.h:50</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a84797e0cdf4484432740a8946325f126"><div class="ttname"><a href="../../d0/d4c/structremmina__plugin__rdp__event.html#a84797e0cdf4484432740a8946325f126">remmina_plugin_rdp_event::type</a></div><div class="ttdeci">RemminaPluginRdpEventType type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00124">rdp_plugin.h:124</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a4ce27482e2571a90b222cbc9cb7f30f6"><div class="ttname"><a href="../../d0/d4c/structremmina__plugin__rdp__event.html#a4ce27482e2571a90b222cbc9cb7f30f6">remmina_plugin_rdp_event::clipboard_formatdataresponse</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@40::@45 clipboard_formatdataresponse</div></div>
<div class="ttc" id="remmina__trace__calls_8h_html_a54905267da58cffa7e9bc9abf69865b6"><div class="ttname"><a href="../../de/d66/remmina__trace__calls_8h.html#a54905267da58cffa7e9bc9abf69865b6">TRACE_CALL</a></div><div class="ttdeci">#define TRACE_CALL(text)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d66/remmina__trace__calls_8h_source.html#l00053">remmina_trace_calls.h:53</a></div></div>
<div class="ttc" id="rdp__graphics_8h_html"><div class="ttname"><a href="../../df/d13/rdp__graphics_8h.html">rdp_graphics.h</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a1b9efdf8e453bf4b14c82e1ee1645050"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a1b9efdf8e453bf4b14c82e1ee1645050">_RemminaPluginService::protocol_plugin_init_get_savepassword</a></div><div class="ttdeci">gboolean(* protocol_plugin_init_get_savepassword)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00183">plugin.h:183</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a37062be61c1ffbbbb884b946da023df0"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a37062be61c1ffbbbb884b946da023df0">_RemminaPluginService::file_get_string</a></div><div class="ttdeci">const gchar *(* file_get_string)(RemminaFile *remminafile, const gchar *setting)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00207">plugin.h:207</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7a8c8701fc5ef4ff1196c8d088dd146a5b"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a8c8701fc5ef4ff1196c8d088dd146a5b">REMMINA_RDP_EVENT_TYPE_MOUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00115">rdp_plugin.h:115</a></div></div>
<div class="ttc" id="struct___remmina_plugin_screenshot_data_html_aa0f78eb9b36ba248c2e368684903ae44"><div class="ttname"><a href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#aa0f78eb9b36ba248c2e368684903ae44">_RemminaPluginScreenshotData::bytesPerPixel</a></div><div class="ttdeci">int bytesPerPixel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00069">types.h:69</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a7d788b6496a65d226039c3a2c176554c"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a7d788b6496a65d226039c3a2c176554c">_RemminaPluginService::protocol_plugin_init_get_domain</a></div><div class="ttdeci">gchar *(* protocol_plugin_init_get_domain)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00182">plugin.h:182</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_a2d4d5d48fa23ed0ae59466f5d3f1dacf"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#a2d4d5d48fa23ed0ae59466f5d3f1dacf">rf_begin_paint</a></div><div class="ttdeci">BOOL rf_begin_paint(rdpContext *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00299">rdp_plugin.c:299</a></div></div>
<div class="ttc" id="plugin_8h_html_aaf53c620d115a4642130227cff4a624aa682ab42b3f4af3dd93452efdb76b8757"><div class="ttname"><a href="../../d9/dc4/plugin_8h.html#aaf53c620d115a4642130227cff4a624aa682ab42b3f4af3dd93452efdb76b8757">REMMINA_PLUGIN_TYPE_PREF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00051">plugin.h:51</a></div></div>
<div class="ttc" id="rdp__file_8c_html_aae001941e15e94a2d6456cc02e5ef75c"><div class="ttname"><a href="../../d0/d9a/rdp__file_8c.html#aae001941e15e94a2d6456cc02e5ef75c">remmina_rdp_file_import</a></div><div class="ttdeci">RemminaFile * remmina_rdp_file_import(const gchar *from_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9a/rdp__file_8c_source.html#l00250">rdp_file.c:250</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a1e2313a63a9cfd208ab722cc1e0ee072a5b2f8ce562cd1720b7a985f3a7c15ea7"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072a5b2f8ce562cd1720b7a985f3a7c15ea7">REMMINA_RDP_UI_RECONNECT_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00168">rdp_plugin.h:168</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ae312d9684d8fed257ad0a06a80aa806f">REMMINA_RDP_UI_CLIPBOARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00172">rdp_plugin.h:172</a></div></div>
<div class="ttc" id="struct___remmina_plugin_screenshot_data_html_ab5d115d8f9fc675f2419d38cdd424ce6"><div class="ttname"><a href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#ab5d115d8f9fc675f2419d38cdd424ce6">_RemminaPluginScreenshotData::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00070">types.h:70</a></div></div>
<div class="ttc" id="structrf__context_html_acee2095e72fb2428c498f62e21800026"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#acee2095e72fb2428c498f62e21800026">rf_context::drawing_area</a></div><div class="ttdeci">GtkWidget * drawing_area</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00288">rdp_plugin.h:288</a></div></div>
<div class="ttc" id="structrf__context_html_aa13bb4f72f3024d81e9051de4bd65ec0"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#aa13bb4f72f3024d81e9051de4bd65ec0">rf_context::cairo_format</a></div><div class="ttdeci">cairo_format_t cairo_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00301">rdp_plugin.h:301</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_aea6bc951b2a6212e254de34f8663cfbb"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#aea6bc951b2a6212e254de34f8663cfbb">REMMINA_RDP_FEATURE_DYNRESUPDATE</a></div><div class="ttdeci">#define REMMINA_RDP_FEATURE_DYNRESUPDATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00061">rdp_plugin.c:61</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a1545f36d1291523b9de7fb546fcb07ba"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a1545f36d1291523b9de7fb546fcb07ba">_RemminaPluginService::register_plugin</a></div><div class="ttdeci">gboolean(* register_plugin)(RemminaPlugin *plugin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00156">plugin.h:156</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__event_html_a32ad1700995dbad58d5003b06692a5f2"><div class="ttname"><a href="../../d0/d4c/structremmina__plugin__rdp__event.html#a32ad1700995dbad58d5003b06692a5f2">remmina_plugin_rdp_event::key_event</a></div><div class="ttdeci">struct remmina_plugin_rdp_event::@40::@42 key_event</div></div>
<div class="ttc" id="rdp__event_8c_html_ab5fe43c1b1b77c39f118d2581942eb81"><div class="ttname"><a href="../../dc/dd7/rdp__event_8c.html#ab5fe43c1b1b77c39f118d2581942eb81">remmina_rdp_event_queue_ui_sync_retint</a></div><div class="ttdeci">int remmina_rdp_event_queue_ui_sync_retint(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/rdp__event_8c_source.html#l01207">rdp_event.c:1207</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_a29cd7c35d086f36b5689225a4c24b3ea"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#a29cd7c35d086f36b5689225a4c24b3ea">FREERDP_CLIENTHOSTNAME_LEN</a></div><div class="ttdeci">#define FREERDP_CLIENTHOSTNAME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00064">rdp_plugin.c:64</a></div></div>
<div class="ttc" id="types_8h_html_a64c62354cc2b7baa50e1d73dcd3df9c7ab0449f571d03e46b99b301792a5d8e1a"><div class="ttname"><a href="../../d9/d49/types_8h.html#a64c62354cc2b7baa50e1d73dcd3df9c7ab0449f571d03e46b99b301792a5d8e1a">REMMINA_PROTOCOL_SSH_SETTING_TUNNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00111">types.h:111</a></div></div>
<div class="ttc" id="rdp__event_8c_html_af3a991a02d35fb09c85f2e752a5393ca"><div class="ttname"><a href="../../dc/dd7/rdp__event_8c.html#af3a991a02d35fb09c85f2e752a5393ca">remmina_rdp_event_init</a></div><div class="ttdeci">void remmina_rdp_event_init(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/rdp__event_8c_source.html#l00709">rdp_event.c:709</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_a88dc1df9d8cfdcf67ddac10dcafd8b82"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#a88dc1df9d8cfdcf67ddac10dcafd8b82">REMMINA_RDP_FEATURE_TOOL_REFRESH</a></div><div class="ttdeci">#define REMMINA_RDP_FEATURE_TOOL_REFRESH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00057">rdp_plugin.c:57</a></div></div>
<div class="ttc" id="structrf__context_html_a8d33f3d947352ef93dd000c28d601446"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a8d33f3d947352ef93dd000c28d601446">rf_context::width</a></div><div class="ttdeci">gint width</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00303">rdp_plugin.h:303</a></div></div>
<div class="ttc" id="struct___remmina_protocol_widget_html"><div class="ttname"><a href="../../de/d76/struct___remmina_protocol_widget.html">_RemminaProtocolWidget</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d6f/remmina__protocol__widget_8h_source.html#l00058">remmina_protocol_widget.h:58</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350a04da01eead7904a55d1c813950609b2d"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350a04da01eead7904a55d1c813950609b2d">REMMINA_PROTOCOL_SETTING_TYPE_SELECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00091">types.h:91</a></div></div>
<div class="ttc" id="struct___remmina_protocol_feature_html"><div class="ttname"><a href="../../dc/de3/struct___remmina_protocol_feature.html">_RemminaProtocolFeature</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00057">types.h:57</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_aad0e82f9220478fa43dfa595dd1086e5"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#aad0e82f9220478fa43dfa595dd1086e5">_RemminaPluginService::file_set_string</a></div><div class="ttdeci">void(* file_set_string)(RemminaFile *remminafile, const gchar *setting, const gchar *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00206">plugin.h:206</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_a56e5020de11446dbc23f3480e313f208"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#a56e5020de11446dbc23f3480e313f208">remmina_plugin_entry</a></div><div class="ttdeci">G_MODULE_EXPORT gboolean remmina_plugin_entry(RemminaPluginService *service)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l01511">rdp_plugin.c:1511</a></div></div>
<div class="ttc" id="rdp__event_8c_html_ae445fd0a84c7c9414a177a69c86cf325"><div class="ttname"><a href="../../dc/dd7/rdp__event_8c.html#ae445fd0a84c7c9414a177a69c86cf325">remmina_rdp_event_queue_ui_async</a></div><div class="ttdeci">void remmina_rdp_event_queue_ui_async(RemminaProtocolWidget *gp, RemminaPluginRdpUiObject *ui)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/rdp__event_8c_source.html#l01201">rdp_event.c:1201</a></div></div>
<div class="ttc" id="structrf__context_html_a79e13a95cf9b00ae1980da5bdda7132e"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a79e13a95cf9b00ae1980da5bdda7132e">rf_context::primary_buffer</a></div><div class="ttdeci">UINT8 * primary_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00307">rdp_plugin.h:307</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a9e0b20ac013464c4c2ab42085961df7d"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a9e0b20ac013464c4c2ab42085961df7d">_RemminaPluginService::protocol_plugin_init_get_password</a></div><div class="ttdeci">gchar *(* protocol_plugin_init_get_password)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00181">plugin.h:181</a></div></div>
<div class="ttc" id="struct___remmina_plugin_screenshot_data_html_acc352444c31929a1ef7aee2a0e37827d"><div class="ttname"><a href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#acc352444c31929a1ef7aee2a0e37827d">_RemminaPluginScreenshotData::bitsPerPixel</a></div><div class="ttdeci">int bitsPerPixel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00068">types.h:68</a></div></div>
<div class="ttc" id="structrf__context_html_a5d119b1f108fe84c74e6484d48c2a565"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a5d119b1f108fe84c74e6484d48c2a565">rf_context::event_queue</a></div><div class="ttdeci">GAsyncQueue * event_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00317">rdp_plugin.h:317</a></div></div>
<div class="ttc" id="structrf__context_html_a72d2a3d60347327237692947df93aea7"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a72d2a3d60347327237692947df93aea7">rf_context::clipboard</a></div><div class="ttdeci">rfClipboard clipboard</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00321">rdp_plugin.h:321</a></div></div>
<div class="ttc" id="structrf__context_html_a522c742a333cf0603dfa7d06a7376669"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a522c742a333cf0603dfa7d06a7376669">rf_context::event_handle</a></div><div class="ttdeci">HANDLE event_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00319">rdp_plugin.h:319</a></div></div>
<div class="ttc" id="rdp__event_8c_html_a65eef99dc99f77be815a5da804ed94fc"><div class="ttname"><a href="../../dc/dd7/rdp__event_8c.html#a65eef99dc99f77be815a5da804ed94fc">remmina_rdp_event_uninit</a></div><div class="ttdeci">void remmina_rdp_event_uninit(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/rdp__event_8c_source.html#l00813">rdp_event.c:813</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7a1973a1fe40811ab9a21bc77c23c42a05"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7a1973a1fe40811ab9a21bc77c23c42a05">REMMINA_RDP_EVENT_TYPE_SEND_MONITOR_LAYOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00119">rdp_plugin.h:119</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7ab15f261f1918633711921198fea0029f"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7ab15f261f1918633711921198fea0029f">REMMINA_RDP_EVENT_TYPE_SCANCODE_UNICODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00114">rdp_plugin.h:114</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_ac424fd51b5a7b6f74b20b21631e5ade1"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#ac424fd51b5a7b6f74b20b21631e5ade1">_RemminaPluginService::protocol_plugin_init_get_username</a></div><div class="ttdeci">gchar *(* protocol_plugin_init_get_username)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00180">plugin.h:180</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_afc324efae9664dbab7923f97cabff819"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#afc324efae9664dbab7923f97cabff819">_RemminaPluginService::protocol_plugin_get_file</a></div><div class="ttdeci">RemminaFile *(* protocol_plugin_get_file)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00168">plugin.h:168</a></div></div>
<div class="ttc" id="struct___remmina_protocol_setting_html"><div class="ttname"><a href="../../d5/db7/struct___remmina_protocol_setting.html">_RemminaProtocolSetting</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00098">types.h:98</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350aa045109309280606ff11a9de1862e2ba"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350aa045109309280606ff11a9de1862e2ba">REMMINA_PROTOCOL_SETTING_TYPE_RESOLUTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00087">types.h:87</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_ae227918d1a30e882b70a269238905ccc"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#ae227918d1a30e882b70a269238905ccc">REMMINA_PLUGIN_RDP_VERSION</a></div><div class="ttdeci">#define REMMINA_PLUGIN_RDP_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00064">rdp_plugin.h:64</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a48b04df4f9d67b0412a9a5583127725b"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a48b04df4f9d67b0412a9a5583127725b">DEFAULT_QUALITY_1</a></div><div class="ttdeci">#define DEFAULT_QUALITY_1</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00060">rdp_plugin.h:60</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a32b18041abaf6ac3cbae2a37f3aa1e70"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a32b18041abaf6ac3cbae2a37f3aa1e70">_RemminaPluginService::protocol_plugin_changed_certificate</a></div><div class="ttdeci">gint(* protocol_plugin_changed_certificate)(RemminaProtocolWidget *gp, const gchar *subject, const gchar *issuer, const gchar *new_fingerprint, const gchar *old_fingerprint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00179">plugin.h:179</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a7576806bc3115195d6598db4271d7b6b"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a7576806bc3115195d6598db4271d7b6b">_RemminaPluginService::protocol_plugin_close_connection</a></div><div class="ttdeci">gboolean(* protocol_plugin_close_connection)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00175">plugin.h:175</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_acb1227bee519771afe166796037edfd2"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#acb1227bee519771afe166796037edfd2">_RemminaPluginService::protocol_plugin_set_height</a></div><div class="ttdeci">void(* protocol_plugin_set_height)(RemminaProtocolWidget *gp, gint height)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00161">plugin.h:161</a></div></div>
<div class="ttc" id="struct___remmina_pref_plugin_html"><div class="ttname"><a href="../../d1/dab/struct___remmina_pref_plugin.html">_RemminaPrefPlugin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00125">plugin.h:125</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a290d3c9c09de3456167290228014e8d5"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a290d3c9c09de3456167290228014e8d5">_RemminaPluginService::protocol_plugin_get_height</a></div><div class="ttdeci">gint(* protocol_plugin_get_height)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00160">plugin.h:160</a></div></div>
<div class="ttc" id="structrf__context_html_a9d28c775fe1ee90ad48941d753564a76"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a9d28c775fe1ee90ad48941d753564a76">rf_context::srcBpp</a></div><div class="ttdeci">gint srcBpp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00297">rdp_plugin.h:297</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a6944e4b47485a470ad2672d225ccd9ac"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a6944e4b47485a470ad2672d225ccd9ac">_RemminaPluginService::protocol_plugin_send_keys_signals</a></div><div class="ttdeci">void(* protocol_plugin_send_keys_signals)(GtkWidget *widget, const guint *keyvals, int length, GdkEventType action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00200">plugin.h:200</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a1e2313a63a9cfd208ab722cc1e0ee072ad3ced07ddeda0100b59ca9c8af47bbe9"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072ad3ced07ddeda0100b59ca9c8af47bbe9">REMMINA_RDP_UI_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00167">rdp_plugin.h:167</a></div></div>
<div class="ttc" id="rdp__cliprdr_8c_html_a4da95b96bf2c86b8f4cc63dcafdd1365"><div class="ttname"><a href="../../d3/db3/rdp__cliprdr_8c.html#a4da95b96bf2c86b8f4cc63dcafdd1365">remmina_rdp_clipboard_free</a></div><div class="ttdeci">void remmina_rdp_clipboard_free(rfContext *rfi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db3/rdp__cliprdr_8c_source.html#l00837">rdp_cliprdr.c:837</a></div></div>
<div class="ttc" id="structrf__context_html_a3c2ffa55ba97bc70324d61b8cc838e73"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a3c2ffa55ba97bc70324d61b8cc838e73">rf_context::connected</a></div><div class="ttdeci">gboolean connected</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00282">rdp_plugin.h:282</a></div></div>
<div class="ttc" id="types_8h_html_a77ae46c4fd739dcd8e819fe9cdae27c5a0658dd6adcfaf5cb52d6d99c97c352d1"><div class="ttname"><a href="../../d9/d49/types_8h.html#a77ae46c4fd739dcd8e819fe9cdae27c5a0658dd6adcfaf5cb52d6d99c97c352d1">REMMINA_PROTOCOL_FEATURE_TYPE_UNFOCUS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00049">types.h:49</a></div></div>
<div class="ttc" id="structrf__context_html_a96c4689f6bc062482536038cb3b24e78"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a96c4689f6bc062482536038cb3b24e78">rf_context::scale</a></div><div class="ttdeci">RemminaScaleMode scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00269">rdp_plugin.h:269</a></div></div>
<div class="ttc" id="structrf__context_html_a3a32bbd599b6684a3c41db9281863362"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a3a32bbd599b6684a3c41db9281863362">rf_context::instance</a></div><div class="ttdeci">freerdp * instance</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00266">rdp_plugin.h:266</a></div></div>
<div class="ttc" id="rdp__file_8c_html_a8b1b44a7a6367e3bca60a6ba6fd086ce"><div class="ttname"><a href="../../d0/d9a/rdp__file_8c.html#a8b1b44a7a6367e3bca60a6ba6fd086ce">remmina_rdp_file_import_test</a></div><div class="ttdeci">gboolean remmina_rdp_file_import_test(const gchar *from_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9a/rdp__file_8c_source.html#l00041">rdp_file.c:41</a></div></div>
<div class="ttc" id="rdp__settings_8h_html"><div class="ttname"><a href="../../d6/ddc/rdp__settings_8h.html">rdp_settings.h</a></div></div>
<div class="ttc" id="structrf__context_html_a660a5c5ea7256ab6a6486f3e831a9174"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a660a5c5ea7256ab6a6486f3e831a9174">rf_context::dispcontext</a></div><div class="ttdeci">DispClientContext * dispcontext</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00274">rdp_plugin.h:274</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_ab5b2b1181588e07e68c083c9539fa84f"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#ab5b2b1181588e07e68c083c9539fa84f">rf_end_paint</a></div><div class="ttdeci">BOOL rf_end_paint(rdpContext *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00308">rdp_plugin.c:308</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html_abd7690614b813952f560e56dd333ec0d"><div class="ttname"><a href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#abd7690614b813952f560e56dd333ec0d">remmina_plugin_rdp_ui_object::event</a></div><div class="ttdeci">struct remmina_plugin_rdp_ui_object::@48::@55 event</div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_ad0b7c4c0a75ae1c738610c6ce7c89df3"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#ad0b7c4c0a75ae1c738610c6ce7c89df3">_RemminaPluginService::protocol_plugin_get_width</a></div><div class="ttdeci">gint(* protocol_plugin_get_width)(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00158">plugin.h:158</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a862d431b370e09c3a79463440a2864f0"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a862d431b370e09c3a79463440a2864f0">DEFAULT_QUALITY_2</a></div><div class="ttdeci">#define DEFAULT_QUALITY_2</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00061">rdp_plugin.h:61</a></div></div>
<div class="ttc" id="rdp__channels_8h_html"><div class="ttname"><a href="../../db/dd7/rdp__channels_8h.html">rdp_channels.h</a></div></div>
<div class="ttc" id="rdp__event_8c_html_a64ce0c66bb4cb6ddaee263ce8563f497"><div class="ttname"><a href="../../dc/dd7/rdp__event_8c.html#a64ce0c66bb4cb6ddaee263ce8563f497">remmina_rdp_event_update_scale</a></div><div class="ttdeci">void remmina_rdp_event_update_scale(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/rdp__event_8c_source.html#l00877">rdp_event.c:877</a></div></div>
<div class="ttc" id="nx__plugin_8h_html_a28bb4a6b8535bd032c00f0139eee41d0"><div class="ttname"><a href="../../d2/d88/nx__plugin_8h.html#a28bb4a6b8535bd032c00f0139eee41d0">GET_PLUGIN_DATA</a></div><div class="ttdeci">#define GET_PLUGIN_DATA(gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d88/nx__plugin_8h_source.html#l00040">nx_plugin.h:40</a></div></div>
<div class="ttc" id="structrf__context_html_a28d215e4ddb5decc543c3c6578df5e3d"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a28d215e4ddb5decc543c3c6578df5e3d">rf_context::settings</a></div><div class="ttdeci">rdpSettings * settings</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00265">rdp_plugin.h:265</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a1e2313a63a9cfd208ab722cc1e0ee072a7b403ba500c63591854b0c2864f2f4bf"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a1e2313a63a9cfd208ab722cc1e0ee072a7b403ba500c63591854b0c2864f2f4bf">REMMINA_RDP_UI_UPDATE_REGION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00166">rdp_plugin.h:166</a></div></div>
<div class="ttc" id="rdp__event_8c_html_a4da10c12b28edc28403766994d6ef29c"><div class="ttname"><a href="../../dc/dd7/rdp__event_8c.html#a4da10c12b28edc28403766994d6ef29c">remmina_rdp_event_unfocus</a></div><div class="ttdeci">void remmina_rdp_event_unfocus(RemminaProtocolWidget *gp)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/rdp__event_8c_source.html#l01062">rdp_event.c:1062</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_aaa5eb17481ba534c9f334d2a61a68ab2"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#aaa5eb17481ba534c9f334d2a61a68ab2">remmina_rdp_load_static_channel_addin</a></div><div class="ttdeci">int remmina_rdp_load_static_channel_addin(rdpChannels *channels, rdpSettings *settings, char *name, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00687">rdp_plugin.c:687</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a051d1d2ab58b0119d656f5036277b7c6a7e7b3ee1f3eef5387c1d3f315cff3f01"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a051d1d2ab58b0119d656f5036277b7c6a7e7b3ee1f3eef5387c1d3f315cff3f01">REMMINA_RDP_UI_CLIPBOARD_DETACH_OWNER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00182">rdp_plugin.h:182</a></div></div>
<div class="ttc" id="rdp__cliprdr_8h_html"><div class="ttname"><a href="../../d1/dbb/rdp__cliprdr_8h.html">rdp_cliprdr.h</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_adafbb901615d7fc9d8f31d5dbdae29d7ae248ff32977c650df357c079f9d8b6e2"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#adafbb901615d7fc9d8f31d5dbdae29d7ae248ff32977c650df357c079f9d8b6e2">REMMINA_RDP_EVENT_TYPE_SCANCODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00113">rdp_plugin.h:113</a></div></div>
<div class="ttc" id="structrf__context_html_a43eb7bc5fcd4ef6cd0d766a7c1044a10"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a43eb7bc5fcd4ef6cd0d766a7c1044a10">rf_context::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00268">rdp_plugin.h:268</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_a01815b7e88a63d13125a313577fb5d44"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#a01815b7e88a63d13125a313577fb5d44">REMMINA_RDP_FEATURE_TOOL_SENDCTRLALTDEL</a></div><div class="ttdeci">#define REMMINA_RDP_FEATURE_TOOL_SENDCTRLALTDEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00060">rdp_plugin.c:60</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_af322f319d56f90b3e763420a85ddd3b7"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#af322f319d56f90b3e763420a85ddd3b7">_RemminaPluginService::file_get_int</a></div><div class="ttdeci">gint(* file_get_int)(RemminaFile *remminafile, const gchar *setting, gint default_value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00210">plugin.h:210</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a3924f0bd0b9688d7f318e087d8cae278"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a3924f0bd0b9688d7f318e087d8cae278">_RemminaPluginService::get_server_port</a></div><div class="ttdeci">void(* get_server_port)(const gchar *server, gint defaultport, gchar **host, gint *port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00227">plugin.h:227</a></div></div>
<div class="ttc" id="types_8h_html_aee1a3e130e6991978acd907b52204350ad898beb6ae625dee1ae27de75f1ab4e3"><div class="ttname"><a href="../../d9/d49/types_8h.html#aee1a3e130e6991978acd907b52204350ad898beb6ae625dee1ae27de75f1ab4e3">REMMINA_PROTOCOL_SETTING_TYPE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00083">types.h:83</a></div></div>
<div class="ttc" id="rdp__event_8h_html"><div class="ttname"><a href="../../d2/d05/rdp__event_8h.html">rdp_event.h</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_a6dc42bd40842f63939e962828c19cfc7"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#a6dc42bd40842f63939e962828c19cfc7">rf_auto_reconnect</a></div><div class="ttdeci">BOOL rf_auto_reconnect(rfContext *rfi)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00215">rdp_plugin.c:215</a></div></div>
<div class="ttc" id="struct___remmina_plugin_screenshot_data_html"><div class="ttname"><a href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html">_RemminaPluginScreenshotData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00066">types.h:66</a></div></div>
<div class="ttc" id="structrf__context_html_a73a760b5eeaaf7d2a0684b1145d5d706"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a73a760b5eeaaf7d2a0684b1145d5d706">rf_context::rfx_context</a></div><div class="ttdeci">RFX_CONTEXT * rfx_context</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00280">rdp_plugin.h:280</a></div></div>
<div class="ttc" id="rdp__channels_8c_html_ad702816cc7dd625f0518f58fc5405c12"><div class="ttname"><a href="../../d6/d97/rdp__channels_8c.html#ad702816cc7dd625f0518f58fc5405c12">remmina_rdp_OnChannelConnectedEventHandler</a></div><div class="ttdeci">void remmina_rdp_OnChannelConnectedEventHandler(rdpContext *context, ChannelConnectedEventArgs *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/rdp__channels_8c_source.html#l00044">rdp_channels.c:44</a></div></div>
<div class="ttc" id="rdp__plugin_8c_html_a9493664f6bdafe3f5b593c3e5e1eacc7"><div class="ttname"><a href="../../d5/db5/rdp__plugin_8c.html#a9493664f6bdafe3f5b593c3e5e1eacc7">remmina_plugin_service</a></div><div class="ttdeci">RemminaPluginService * remmina_plugin_service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/rdp__plugin_8c_source.html#l00066">rdp_plugin.c:66</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a0c45a9593d1fcc473a4796f9908ce4df"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a0c45a9593d1fcc473a4796f9908ce4df">_RemminaPluginService::protocol_plugin_set_width</a></div><div class="ttdeci">void(* protocol_plugin_set_width)(RemminaProtocolWidget *gp, gint width)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00159">plugin.h:159</a></div></div>
<div class="ttc" id="struct___remmina_plugin_screenshot_data_html_a757f692624e3e110eaa5bf0c05ac2a6c"><div class="ttname"><a href="../../d9/d0b/struct___remmina_plugin_screenshot_data.html#a757f692624e3e110eaa5bf0c05ac2a6c">_RemminaPluginScreenshotData::buffer</a></div><div class="ttdeci">unsigned char * buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00067">types.h:67</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html_a347fb18e30f47ba1f1772f2a6b05cab9"><div class="ttname"><a href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a347fb18e30f47ba1f1772f2a6b05cab9">remmina_plugin_rdp_ui_object::region</a></div><div class="ttdeci">struct remmina_plugin_rdp_ui_object::@48::@50 region</div></div>
<div class="ttc" id="struct___remmina_plugin_service_html"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html">_RemminaPluginService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00154">plugin.h:154</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a38a3db82b3e00863f07d2c553e90ce64"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a38a3db82b3e00863f07d2c553e90ce64">_RemminaPluginService::protocol_plugin_emit_signal</a></div><div class="ttdeci">void(* protocol_plugin_emit_signal)(RemminaProtocolWidget *gp, const gchar *signal_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00169">plugin.h:169</a></div></div>
<div class="ttc" id="struct___remmina_plugin_service_html_a5ed74d9a9a0469dd016f82f971b4d0fa"><div class="ttname"><a href="../../d2/d1b/struct___remmina_plugin_service.html#a5ed74d9a9a0469dd016f82f971b4d0fa">_RemminaPluginService::protocol_plugin_init_authuserpwd</a></div><div class="ttdeci">gint(* protocol_plugin_init_authuserpwd)(RemminaProtocolWidget *gp, gboolean want_domain, gboolean allow_password_saving)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc4/plugin_8h_source.html#l00177">plugin.h:177</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_afe2d7714782068b3db60f578fb6cec79"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#afe2d7714782068b3db60f578fb6cec79">DEFAULT_QUALITY_0</a></div><div class="ttdeci">#define DEFAULT_QUALITY_0</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00059">rdp_plugin.h:59</a></div></div>
<div class="ttc" id="config_8h_html_aba127e7146091407342004c8d8da6549"><div class="ttname"><a href="../../db/d16/config_8h.html#aba127e7146091407342004c8d8da6549">REMMINA_RUNTIME_LOCALEDIR</a></div><div class="ttdeci">#define REMMINA_RUNTIME_LOCALEDIR</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/config_8h_source.html#l00026">config.h:26</a></div></div>
<div class="ttc" id="config_8h_html_ab23870bd5469d09c183b5a4e89efd81d"><div class="ttname"><a href="../../db/d16/config_8h.html#ab23870bd5469d09c183b5a4e89efd81d">GETTEXT_PACKAGE</a></div><div class="ttdeci">#define GETTEXT_PACKAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/config_8h_source.html#l00023">config.h:23</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a0e50aeabb34e9e653933d081e74c5c16"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a0e50aeabb34e9e653933d081e74c5c16">rfContext</a></div><div class="ttdeci">struct rf_context rfContext</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00055">rdp_plugin.h:55</a></div></div>
<div class="ttc" id="structrf__context_html_a91f20005b39ad9e1073cf25bf6d7c2f2"><div class="ttname"><a href="../../d0/dc9/structrf__context.html#a91f20005b39ad9e1073cf25bf6d7c2f2">rf_context::sw_gdi</a></div><div class="ttdeci">gboolean sw_gdi</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00287">rdp_plugin.h:287</a></div></div>
<div class="ttc" id="structremmina__plugin__rdp__ui__object_html_a46d939889fba73c1360f924efaa09262"><div class="ttname"><a href="../../d8/d74/structremmina__plugin__rdp__ui__object.html#a46d939889fba73c1360f924efaa09262">remmina_plugin_rdp_ui_object::type</a></div><div class="ttdeci">RemminaPluginRdpUiType type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00202">rdp_plugin.h:202</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a72890e2ce928a8ad6efbab20e7287633"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a72890e2ce928a8ad6efbab20e7287633">DEFAULT_QUALITY_9</a></div><div class="ttdeci">#define DEFAULT_QUALITY_9</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00062">rdp_plugin.h:62</a></div></div>
<div class="ttc" id="rdp__settings_8c_html_a4052ab6359b14e8f9a4cf76bed4da90c"><div class="ttname"><a href="../../d3/dc2/rdp__settings_8c.html#a4052ab6359b14e8f9a4cf76bed4da90c">remmina_rdp_settings_get_keyboard_layout</a></div><div class="ttdeci">guint remmina_rdp_settings_get_keyboard_layout(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc2/rdp__settings_8c_source.html#l00065">rdp_settings.c:65</a></div></div>
<div class="ttc" id="rdp__plugin_8h_html_a70cc17b1d3603d036f962a0ae8496b35a5bec41fd19576fc5c3e397366461dfe4"><div class="ttname"><a href="../../d8/dc9/rdp__plugin_8h.html#a70cc17b1d3603d036f962a0ae8496b35a5bec41fd19576fc5c3e397366461dfe4">REMMINA_RDP_UI_EVENT_UPDATE_SCALE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc9/rdp__plugin_8h_source.html#l00197">rdp_plugin.h:197</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_0136ed835ef94417d8a105e5466435bb.html">remmina-plugins</a></li><li class="navelem"><a class="el" href="../../dir_7860dafb121181d326a4eecf445876a9.html">rdp</a></li><li class="navelem"><a class="el" href="../../d5/db5/rdp__plugin_8c.html">rdp_plugin.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
